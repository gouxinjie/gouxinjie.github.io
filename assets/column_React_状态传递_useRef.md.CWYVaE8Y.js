import{_ as n,C as l,c as e,o as t,j as i,G as p,aQ as h,a as k}from"./chunks/framework.DEi4YP2n.js";const b=JSON.parse('{"title":"React ä¸­çš„ useRef è§£æï¼šä¸ä»…ä»…æ˜¯è·å– DOMï¼","description":"","frontmatter":{},"headers":[],"relativePath":"column/React/çŠ¶æ€ä¼ é€’/useRef.md","filePath":"column/React/çŠ¶æ€ä¼ é€’/useRef.md","lastUpdated":1760688554000}'),r={name:"column/React/çŠ¶æ€ä¼ é€’/useRef.md"};function d(E,s,c,g,u,o){const a=l("ArticleMetadata");return t(),e("div",null,[s[0]||(s[0]=i("h1",{id:"react-ä¸­çš„-useref-è§£æ-ä¸ä»…ä»…æ˜¯è·å–-dom",tabindex:"-1"},[k("React ä¸­çš„ useRef è§£æï¼šä¸ä»…ä»…æ˜¯è·å– DOMï¼ "),i("a",{class:"header-anchor",href:"#react-ä¸­çš„-useref-è§£æ-ä¸ä»…ä»…æ˜¯è·å–-dom","aria-label":'Permalink to "React ä¸­çš„ useRef è§£æï¼šä¸ä»…ä»…æ˜¯è·å– DOMï¼"'},"â€‹")],-1)),p(a),s[1]||(s[1]=h(`<nav class="table-of-contents"><ul><li><a href="#ä¸€ã€ä»€ä¹ˆæ˜¯-useref">ä¸€ã€ä»€ä¹ˆæ˜¯ useRefï¼Ÿ</a><ul><li><a href="#ğŸ“˜-åŸºæœ¬å®šä¹‰">ğŸ“˜ åŸºæœ¬å®šä¹‰ï¼š</a></li></ul></li><li><a href="#äºŒã€æœ€å¸¸è§ç”¨æ³•-è·å–-dom-å…ƒç´ ">äºŒã€æœ€å¸¸è§ç”¨æ³•ï¼šè·å– DOM å…ƒç´ </a></li><li><a href="#ä¸‰ã€ç¬¬äºŒä¸ªå¼ºå¤§ç”¨æ³•-ä¿å­˜å¯å˜å€¼-ä¸è§¦å‘æ¸²æŸ“">ä¸‰ã€ç¬¬äºŒä¸ªå¼ºå¤§ç”¨æ³•ï¼šä¿å­˜å¯å˜å€¼ï¼ˆä¸è§¦å‘æ¸²æŸ“ï¼‰</a></li><li><a href="#å››ã€ç¬¬ä¸‰ä¸ªç”¨æ³•-è·¨æ¸²æŸ“å‘¨æœŸä¿å­˜å‰ä¸€ä¸ªå€¼-å‰å€¼-æŠ€å·§">å››ã€ç¬¬ä¸‰ä¸ªç”¨æ³•ï¼šè·¨æ¸²æŸ“å‘¨æœŸä¿å­˜å‰ä¸€ä¸ªå€¼ï¼ˆâ€œå‰å€¼â€æŠ€å·§ï¼‰</a></li><li><a href="#äº”ã€useref-ä¸-usestate-çš„åŒºåˆ«">äº”ã€useRef ä¸ useState çš„åŒºåˆ«</a></li><li><a href="#å…­ã€å››ä¸ªå…¸å‹çš„-useref-å®æˆ˜åœºæ™¯">å…­ã€å››ä¸ªå…¸å‹çš„ useRef å®æˆ˜åœºæ™¯</a><ul><li><a href="#_1ï¸âƒ£-ä¿å­˜å®šæ—¶å™¨-id">1ï¸âƒ£ ä¿å­˜å®šæ—¶å™¨ ID</a></li><li><a href="#_2ï¸âƒ£-ä¿å­˜ä¸Šä¸€æ¬¡çš„-props-æˆ–-state">2ï¸âƒ£ ä¿å­˜ä¸Šä¸€æ¬¡çš„ props æˆ– state</a></li><li><a href="#_3ï¸âƒ£-æ§åˆ¶åŠ¨ç”»æˆ–è§†é¢‘æ’­æ”¾">3ï¸âƒ£ æ§åˆ¶åŠ¨ç”»æˆ–è§†é¢‘æ’­æ”¾</a></li><li><a href="#_4ï¸âƒ£-é¿å…é—­åŒ…é™·é˜±-ä¿å­˜æœ€æ–°å›è°ƒ">4ï¸âƒ£ é¿å…é—­åŒ…é™·é˜±ï¼ˆä¿å­˜æœ€æ–°å›è°ƒï¼‰</a></li></ul></li><li><a href="#ä¸ƒã€useref-çš„å·¥ä½œåŸç†">ä¸ƒã€useRef çš„å·¥ä½œåŸç†</a></li><li><a href="#å…«ã€ä½¿ç”¨é™·é˜±ä¸æ³¨æ„äº‹é¡¹">å…«ã€ä½¿ç”¨é™·é˜±ä¸æ³¨æ„äº‹é¡¹</a></li><li><a href="#ä¹ã€ç»“åˆ-forwardref-å®ç°ç»„ä»¶é€ä¼ ">ä¹ã€ç»“åˆ forwardRef å®ç°ç»„ä»¶é€ä¼ </a></li><li><a href="#æ€»ç»“">æ€»ç»“</a></li></ul></nav><blockquote><p>å¤§å¤šæ•°äººç¬¬ä¸€æ¬¡æ¥è§¦ <code>useRef</code> æ—¶ï¼ŒåªçŸ¥é“å®ƒâ€œå¯ä»¥æ“ä½œ DOMâ€ã€‚<br> ä½†å…¶å®ï¼Œå®ƒæ›´åƒæ˜¯ä¸€ä¸ªâ€œå¯ä»¥åœ¨ç»„ä»¶ç”Ÿå‘½å‘¨æœŸä¸­ä¿æŒä¸å˜çš„ç›’å­â€ã€‚</p><p><code>useRef</code> = <strong>å¯å˜å¼•ç”¨</strong> + <strong>ä¸è§¦å‘é‡æ–°æ¸²æŸ“</strong>ã€‚</p></blockquote><h2 id="ä¸€ã€ä»€ä¹ˆæ˜¯-useref" tabindex="-1">ä¸€ã€ä»€ä¹ˆæ˜¯ useRefï¼Ÿ <a class="header-anchor" href="#ä¸€ã€ä»€ä¹ˆæ˜¯-useref" aria-label="Permalink to &quot;ä¸€ã€ä»€ä¹ˆæ˜¯ useRefï¼Ÿ&quot;">â€‹</a></h2><h3 id="ğŸ“˜-åŸºæœ¬å®šä¹‰" tabindex="-1">ğŸ“˜ åŸºæœ¬å®šä¹‰ï¼š <a class="header-anchor" href="#ğŸ“˜-åŸºæœ¬å®šä¹‰" aria-label="Permalink to &quot;ğŸ“˜ åŸºæœ¬å®šä¹‰ï¼š&quot;">â€‹</a></h3><div class="language-tsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ref</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(initialValue);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><code>useRef</code> è¿”å›ä¸€ä¸ª <strong>ref å¯¹è±¡</strong>ï¼Œå®ƒå…·æœ‰å”¯ä¸€çš„å±æ€§ï¼š</p><div class="language-tsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ref.current; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¿å­˜çš„å€¼</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>ä¸æ™®é€šå˜é‡ä¸åŒçš„æ˜¯ï¼š</p><ul><li><code>ref.current</code> åœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­<strong>ä¿æŒåŒä¸€ä¸ªå¼•ç”¨</strong>ï¼›</li><li>æ”¹å˜å®ƒä¸ä¼šè§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼›</li><li>å®ƒå¯ä»¥ä¿å­˜ä»»ä½•æ•°æ®ï¼šDOM èŠ‚ç‚¹ã€æ•°å€¼ã€å¯¹è±¡ã€å‡½æ•°â€¦â€¦</li></ul></blockquote><h2 id="äºŒã€æœ€å¸¸è§ç”¨æ³•-è·å–-dom-å…ƒç´ " tabindex="-1">äºŒã€æœ€å¸¸è§ç”¨æ³•ï¼šè·å– DOM å…ƒç´  <a class="header-anchor" href="#äºŒã€æœ€å¸¸è§ç”¨æ³•-è·å–-dom-å…ƒç´ " aria-label="Permalink to &quot;äºŒã€æœ€å¸¸è§ç”¨æ³•ï¼šè·å– DOM å…ƒç´ &quot;">â€‹</a></h2><p>è¿™æ˜¯ <code>useRef</code> æœ€ç›´è§‚çš„ç”¨é€”ã€‚</p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> React, { useRef, useEffect } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;react&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> InputFocus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> inputRef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  useEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // æŒ‚è½½åè‡ªåŠ¨èšç„¦</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    inputRef.current.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">focus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }, []);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">input</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{inputRef} </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">placeholder</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è‡ªåŠ¨èšç„¦è¾“å…¥æ¡†&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> InputFocus;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>âœ… æ‰§è¡Œæµç¨‹ï¼š</p><ol><li>React æ¸²æŸ“æ—¶å°† DOM èŠ‚ç‚¹èµ‹å€¼ç»™ <code>inputRef.current</code></li><li>åœ¨ <code>useEffect</code> ä¸­å¯ä»¥ç›´æ¥è®¿é—®è¿™ä¸ªçœŸå® DOM</li><li>å¯ç”¨æ¥è°ƒç”¨ DOM APIï¼ˆå¦‚ <code>.focus()</code>ã€<code>.scrollIntoView()</code>ï¼‰</li></ol><h2 id="ä¸‰ã€ç¬¬äºŒä¸ªå¼ºå¤§ç”¨æ³•-ä¿å­˜å¯å˜å€¼-ä¸è§¦å‘æ¸²æŸ“" tabindex="-1">ä¸‰ã€ç¬¬äºŒä¸ªå¼ºå¤§ç”¨æ³•ï¼šä¿å­˜å¯å˜å€¼ï¼ˆä¸è§¦å‘æ¸²æŸ“ï¼‰ <a class="header-anchor" href="#ä¸‰ã€ç¬¬äºŒä¸ªå¼ºå¤§ç”¨æ³•-ä¿å­˜å¯å˜å€¼-ä¸è§¦å‘æ¸²æŸ“" aria-label="Permalink to &quot;ä¸‰ã€ç¬¬äºŒä¸ªå¼ºå¤§ç”¨æ³•ï¼šä¿å­˜å¯å˜å€¼ï¼ˆä¸è§¦å‘æ¸²æŸ“ï¼‰&quot;">â€‹</a></h2><p><code>useRef</code> è¿˜èƒ½å­˜å‚¨<strong>åœ¨ç»„ä»¶æ›´æ–°ä¹‹é—´æŒä¹…å­˜åœ¨</strong>çš„å˜é‡ã€‚è¿™ä¸æ™®é€šå˜é‡ä¸åŒï¼Œå› ä¸ºæ™®é€šå˜é‡åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½ä¼šé‡æ–°åˆ›å»ºã€‚</p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> React, { useState, useRef } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;react&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Timer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">count</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setCount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> timerRef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¿å­˜å®šæ—¶å™¨ ID</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> start</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">timerRef.current) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      timerRef.current </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setInterval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setCount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">c</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> stop</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    clearInterval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(timerRef.current);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    timerRef.current </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;è®¡æ•°ï¼š{count}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onClick</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{start}&gt;å¼€å§‹&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onClick</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{stop}&gt;åœæ­¢&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Timer;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>ğŸ’¡ <strong>ä¸ºä»€ä¹ˆä¸ç”¨ useStateï¼Ÿ</strong></p><ul><li><code>useState</code> çš„æ›´æ–°ä¼šå¯¼è‡´ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼›</li><li><code>useRef</code> çš„æ›´æ–°ä¸ä¼šè§¦å‘æ¸²æŸ“ï¼›</li><li>å› æ­¤ï¼Œ<code>useRef</code> æ›´é€‚åˆå­˜å‚¨â€œé UI çŠ¶æ€â€çš„å€¼ã€‚</li></ul><h2 id="å››ã€ç¬¬ä¸‰ä¸ªç”¨æ³•-è·¨æ¸²æŸ“å‘¨æœŸä¿å­˜å‰ä¸€ä¸ªå€¼-å‰å€¼-æŠ€å·§" tabindex="-1">å››ã€ç¬¬ä¸‰ä¸ªç”¨æ³•ï¼šè·¨æ¸²æŸ“å‘¨æœŸä¿å­˜å‰ä¸€ä¸ªå€¼ï¼ˆâ€œå‰å€¼â€æŠ€å·§ï¼‰ <a class="header-anchor" href="#å››ã€ç¬¬ä¸‰ä¸ªç”¨æ³•-è·¨æ¸²æŸ“å‘¨æœŸä¿å­˜å‰ä¸€ä¸ªå€¼-å‰å€¼-æŠ€å·§" aria-label="Permalink to &quot;å››ã€ç¬¬ä¸‰ä¸ªç”¨æ³•ï¼šè·¨æ¸²æŸ“å‘¨æœŸä¿å­˜å‰ä¸€ä¸ªå€¼ï¼ˆâ€œå‰å€¼â€æŠ€å·§ï¼‰&quot;">â€‹</a></h2><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> React, { useState, useEffect, useRef } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;react&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PreviousValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">count</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setCount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> prevCount</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(count); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¿å­˜ä¸Šä¸€æ¬¡çš„ count å€¼</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  useEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    prevCount.current </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> count; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ¯æ¬¡æ›´æ–°ååŒæ­¥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }, [count]);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;å½“å‰ï¼š{count}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;ä¸Šä¸€æ¬¡ï¼š{prevCount.current}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onClick</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setCount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(count </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)}&gt;+1&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PreviousValue;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>âœ… ä½¿ç”¨åœºæ™¯ï¼š</p><ul><li>å¯¹æ¯”å‰åçŠ¶æ€ï¼ˆå¦‚åŠ¨ç”»å·®å€¼ã€æ»šåŠ¨è·ç¦»ç­‰ï¼‰</li><li>å®ç°â€œä¸Šæ¬¡è¾“å…¥å€¼â€â€œä¸Šæ¬¡ç‚¹å‡»æ—¶é—´â€ç­‰é€»è¾‘</li></ul><h2 id="äº”ã€useref-ä¸-usestate-çš„åŒºåˆ«" tabindex="-1">äº”ã€useRef ä¸ useState çš„åŒºåˆ« <a class="header-anchor" href="#äº”ã€useref-ä¸-usestate-çš„åŒºåˆ«" aria-label="Permalink to &quot;äº”ã€useRef ä¸ useState çš„åŒºåˆ«&quot;">â€‹</a></h2><table tabindex="0"><thead><tr><th>ç‰¹æ€§</th><th>useState</th><th>useRef</th></tr></thead><tbody><tr><td>å€¼å˜åŒ–æ˜¯å¦è§¦å‘é‡æ¸²æŸ“</td><td>âœ… æ˜¯</td><td>âŒ å¦</td></tr><tr><td>æ˜¯å¦åœ¨æ¸²æŸ“é—´ä¿æŒå€¼</td><td>âœ… æ˜¯</td><td>âœ… æ˜¯</td></tr><tr><td>æ˜¯å¦å¯ç›´æ¥ç»‘å®šåˆ° DOM</td><td>âŒ å¦</td><td>âœ… æ˜¯ï¼ˆ<code>ref</code> å±æ€§ï¼‰</td></tr><tr><td>ä½¿ç”¨åœºæ™¯</td><td>å½±å“ UI çš„çŠ¶æ€</td><td>ä¸å½±å“ UI çš„æ•°æ®ã€DOM æ“ä½œ</td></tr><tr><td>æ›´æ–°æ–¹å¼</td><td><code>setState</code></td><td>ç›´æ¥ä¿®æ”¹ <code>ref.current</code></td></tr></tbody></table><p>ğŸ‘‰ æ€»ç»“ä¸€å¥è¯ï¼š</p><blockquote><ul><li><strong><code>useState</code></strong>ï¼šç®¡ç†â€œæ˜¾ç¤ºå‡ºæ¥çš„çŠ¶æ€â€</li><li><strong><code>useRef</code></strong>ï¼šç®¡ç†â€œå¹•åçŠ¶æ€â€</li></ul></blockquote><h2 id="å…­ã€å››ä¸ªå…¸å‹çš„-useref-å®æˆ˜åœºæ™¯" tabindex="-1">å…­ã€å››ä¸ªå…¸å‹çš„ useRef å®æˆ˜åœºæ™¯ <a class="header-anchor" href="#å…­ã€å››ä¸ªå…¸å‹çš„-useref-å®æˆ˜åœºæ™¯" aria-label="Permalink to &quot;å…­ã€å››ä¸ªå…¸å‹çš„ useRef å®æˆ˜åœºæ™¯&quot;">â€‹</a></h2><h3 id="_1ï¸âƒ£-ä¿å­˜å®šæ—¶å™¨-id" tabindex="-1">1ï¸âƒ£ ä¿å­˜å®šæ—¶å™¨ ID <a class="header-anchor" href="#_1ï¸âƒ£-ä¿å­˜å®šæ—¶å™¨-id" aria-label="Permalink to &quot;1ï¸âƒ£ ä¿å­˜å®šæ—¶å™¨ ID&quot;">â€‹</a></h3><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> timerRef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>é˜²æ­¢é‡å¤åˆ›å»ºã€é¿å…å†…å­˜æ³„æ¼ã€‚</p><h3 id="_2ï¸âƒ£-ä¿å­˜ä¸Šä¸€æ¬¡çš„-props-æˆ–-state" tabindex="-1">2ï¸âƒ£ ä¿å­˜ä¸Šä¸€æ¬¡çš„ props æˆ– state <a class="header-anchor" href="#_2ï¸âƒ£-ä¿å­˜ä¸Šä¸€æ¬¡çš„-props-æˆ–-state" aria-label="Permalink to &quot;2ï¸âƒ£ ä¿å­˜ä¸Šä¸€æ¬¡çš„ props æˆ– state&quot;">â€‹</a></h3><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> prevProps</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(props);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>å®ç°å¯¹æ¯”å˜åŒ–ã€‚</p><h3 id="_3ï¸âƒ£-æ§åˆ¶åŠ¨ç”»æˆ–è§†é¢‘æ’­æ”¾" tabindex="-1">3ï¸âƒ£ æ§åˆ¶åŠ¨ç”»æˆ–è§†é¢‘æ’­æ”¾ <a class="header-anchor" href="#_3ï¸âƒ£-æ§åˆ¶åŠ¨ç”»æˆ–è§†é¢‘æ’­æ”¾" aria-label="Permalink to &quot;3ï¸âƒ£ æ§åˆ¶åŠ¨ç”»æˆ–è§†é¢‘æ’­æ”¾&quot;">â€‹</a></h3><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">videoRef.current.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">play</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ç›´æ¥è®¿é—®çœŸå® DOM å…ƒç´ ã€‚</p><h3 id="_4ï¸âƒ£-é¿å…é—­åŒ…é™·é˜±-ä¿å­˜æœ€æ–°å›è°ƒ" tabindex="-1">4ï¸âƒ£ é¿å…é—­åŒ…é™·é˜±ï¼ˆä¿å­˜æœ€æ–°å›è°ƒï¼‰ <a class="header-anchor" href="#_4ï¸âƒ£-é¿å…é—­åŒ…é™·é˜±-ä¿å­˜æœ€æ–°å›è°ƒ" aria-label="Permalink to &quot;4ï¸âƒ£ é¿å…é—­åŒ…é™·é˜±ï¼ˆä¿å­˜æœ€æ–°å›è°ƒï¼‰&quot;">â€‹</a></h3><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useInterval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">callback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">delay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> savedCallback</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  useEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    savedCallback.current </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> callback; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¿å­˜æœ€æ–°å›è°ƒ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  useEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> tick</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> savedCallback.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">current</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setInterval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(tick, delay);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> clearInterval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(id);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }, [delay]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>ğŸ’¡ <strong>ä¸ºä»€ä¹ˆè¦è¿™æ ·å†™ï¼Ÿ</strong> å› ä¸º React çš„å‡½æ•°ç»„ä»¶æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šåˆ›å»ºæ–°çš„é—­åŒ…ã€‚å¦‚æœç›´æ¥ä½¿ç”¨æ—§å›è°ƒï¼Œä¼šå¯¼è‡´è®¿é—®åˆ°â€œè¿‡æœŸâ€çš„å˜é‡ã€‚</p><h2 id="ä¸ƒã€useref-çš„å·¥ä½œåŸç†" tabindex="-1">ä¸ƒã€useRef çš„å·¥ä½œåŸç† <a class="header-anchor" href="#ä¸ƒã€useref-çš„å·¥ä½œåŸç†" aria-label="Permalink to &quot;ä¸ƒã€useRef çš„å·¥ä½œåŸç†&quot;">â€‹</a></h2><p>React å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªå¯¹è±¡ï¼š</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  current</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">initialValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>è¿™ä¸ªå¯¹è±¡åœ¨ç»„ä»¶æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­éƒ½ä¸ä¼šå˜ã€‚</p><ul><li>å½“ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼Œ<code>ref.current</code> ä»ç„¶ä¿æŒä¹‹å‰çš„å¼•ç”¨ï¼›</li><li>å½“ä½ ä¿®æ”¹ <code>ref.current</code> æ—¶ï¼Œä¸ä¼šè§¦å‘æ–°çš„æ¸²æŸ“ï¼›</li><li>React åœ¨ <code>ref</code> å±æ€§ç»‘å®šçš„ DOM å…ƒç´ åˆ›å»ºæˆ–é”€æ¯æ—¶è‡ªåŠ¨æ›´æ–°å®ƒã€‚</li></ul><h2 id="å…«ã€ä½¿ç”¨é™·é˜±ä¸æ³¨æ„äº‹é¡¹" tabindex="-1">å…«ã€ä½¿ç”¨é™·é˜±ä¸æ³¨æ„äº‹é¡¹ <a class="header-anchor" href="#å…«ã€ä½¿ç”¨é™·é˜±ä¸æ³¨æ„äº‹é¡¹" aria-label="Permalink to &quot;å…«ã€ä½¿ç”¨é™·é˜±ä¸æ³¨æ„äº‹é¡¹&quot;">â€‹</a></h2><table tabindex="0"><thead><tr><th>âš ï¸ å¸¸è§è¯¯åŒº</th><th>åŸå› </th></tr></thead><tbody><tr><td>âŒ ä¿®æ”¹ <code>ref.current</code> åå¸Œæœ›è§¦å‘æ¸²æŸ“</td><td>ä¸ä¼šè§¦å‘ UI æ›´æ–°</td></tr><tr><td>âŒ åœ¨æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰è®¿é—® DOM</td><td><code>ref.current</code> ä¸º <code>null</code></td></tr><tr><td>âŒ åœ¨ render é˜¶æ®µè®¿é—® <code>ref.current</code></td><td>æ­¤æ—¶è¿˜æœªç»‘å®š</td></tr><tr><td>âœ… æ­£ç¡®è®¿é—®æ—¶æœº</td><td>åœ¨ <code>useEffect</code> æˆ– <code>useLayoutEffect</code> ä¸­</td></tr></tbody></table><h2 id="ä¹ã€ç»“åˆ-forwardref-å®ç°ç»„ä»¶é€ä¼ " tabindex="-1">ä¹ã€ç»“åˆ forwardRef å®ç°ç»„ä»¶é€ä¼  <a class="header-anchor" href="#ä¹ã€ç»“åˆ-forwardref-å®ç°ç»„ä»¶é€ä¼ " aria-label="Permalink to &quot;ä¹ã€ç»“åˆ forwardRef å®ç°ç»„ä»¶é€ä¼ &quot;">â€‹</a></h2><p><code>useRef</code> è¿˜èƒ½é…åˆ <code>forwardRef</code>ï¼Œå®ç°â€œçˆ¶ç»„ä»¶æ“ä½œå­ç»„ä»¶çš„ DOMâ€ã€‚</p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> React, { useRef, forwardRef, useImperativeHandle } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;react&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ChildInput</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> forwardRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">props</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> inputRef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  useImperativeHandle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ref, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    focus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> inputRef.current.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">focus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">input</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{inputRef} </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">placeholder</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å­ç»„ä»¶è¾“å…¥æ¡†&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Parent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> childRef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ChildInput</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{childRef} /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onClick</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> childRef.current.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">focus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()}&gt;è®©å­ç»„ä»¶èšç„¦&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>âœ… è¿™åœ¨å°è£…ç»„ä»¶åº“æ—¶éå¸¸å¸¸è§ï¼Œä¾‹å¦‚è‡ªå®šä¹‰è¾“å…¥æ¡†ã€æ¨¡æ€æ¡†ç­‰ã€‚</p><h2 id="æ€»ç»“" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“" aria-label="Permalink to &quot;æ€»ç»“&quot;">â€‹</a></h2><table tabindex="0"><thead><tr><th>ç”¨é€”</th><th>æè¿°</th></tr></thead><tbody><tr><td>è®¿é—® DOM</td><td>ç›´æ¥è·å–çœŸå® DOM å…ƒç´ </td></tr><tr><td>ä¿å­˜å¯å˜æ•°æ®</td><td>ä¸è§¦å‘æ¸²æŸ“çš„æŒä¹…å˜é‡</td></tr><tr><td>ä¿å­˜ä¸Šä¸€æ¬¡å€¼</td><td>å®ç°å¯¹æ¯”é€»è¾‘</td></tr><tr><td>ä¿å­˜å›è°ƒå‡½æ•°</td><td>è§£å†³é—­åŒ…é™·é˜±</td></tr><tr><td>ç»“åˆ forwardRef</td><td>å®ç°ç»„ä»¶é€ä¼ </td></tr></tbody></table>`,52))])}const F=n(r,[["render",d]]);export{b as __pageData,F as default};
