import{_ as n,C as l,c as p,o as e,j as i,G as h,aQ as t,a as k}from"./chunks/framework.DEi4YP2n.js";const r="/assets/IntersectionObserver.DCPbf8qO.gif",u=JSON.parse('{"title":"å‰ç«¯æ‡’åŠ è½½çš„ä¼˜é›…å®ç°ï¼šåŸºäº IntersectionObserver çš„å®æˆ˜æ¡ˆä¾‹","description":"","frontmatter":{},"headers":[],"relativePath":"column/ProblemNotes/æ—¥å¸¸ç¬”è®°/IntersectionObserverå®ç°æ‡’åŠ è½½.md","filePath":"column/ProblemNotes/æ—¥å¸¸ç¬”è®°/IntersectionObserverå®ç°æ‡’åŠ è½½.md","lastUpdated":1763628978000}'),E={name:"column/ProblemNotes/æ—¥å¸¸ç¬”è®°/IntersectionObserverå®ç°æ‡’åŠ è½½.md"};function d(g,s,c,y,o,b){const a=l("ArticleMetadata");return e(),p("div",null,[s[0]||(s[0]=i("h1",{id:"å‰ç«¯æ‡’åŠ è½½çš„ä¼˜é›…å®ç°-åŸºäº-intersectionobserver-çš„å®æˆ˜æ¡ˆä¾‹",tabindex:"-1"},[k("å‰ç«¯æ‡’åŠ è½½çš„ä¼˜é›…å®ç°ï¼šåŸºäº IntersectionObserver çš„å®æˆ˜æ¡ˆä¾‹ "),i("a",{class:"header-anchor",href:"#å‰ç«¯æ‡’åŠ è½½çš„ä¼˜é›…å®ç°-åŸºäº-intersectionobserver-çš„å®æˆ˜æ¡ˆä¾‹","aria-label":'Permalink to "å‰ç«¯æ‡’åŠ è½½çš„ä¼˜é›…å®ç°ï¼šåŸºäº IntersectionObserver çš„å®æˆ˜æ¡ˆä¾‹"'},"â€‹")],-1)),h(a),s[1]||(s[1]=t('<nav class="table-of-contents"><ul><li><a href="#ğŸŒŸ-ä¸€ã€ä»€ä¹ˆæ˜¯-intersectionobserver">ğŸŒŸ ä¸€ã€ä»€ä¹ˆæ˜¯ IntersectionObserverï¼Ÿ</a></li><li><a href="#ğŸ§©-äºŒã€æ‡’åŠ è½½çš„å¸¸è§åº”ç”¨åœºæ™¯">ğŸ§© äºŒã€æ‡’åŠ è½½çš„å¸¸è§åº”ç”¨åœºæ™¯</a></li><li><a href="#âš™ï¸-ä¸‰ã€åŠŸèƒ½ç›®æ ‡">âš™ï¸ ä¸‰ã€åŠŸèƒ½ç›®æ ‡</a></li><li><a href="#ğŸ’»-å››ã€æ ¸å¿ƒå®ç°ä»£ç ">ğŸ’» å››ã€æ ¸å¿ƒå®ç°ä»£ç </a></li><li><a href="#ğŸ”-äº”ã€å®ç°æ€è·¯æ‹†è§£">ğŸ” äº”ã€å®ç°æ€è·¯æ‹†è§£</a><ul><li><a href="#_1-è®¾ç½®è§‚å¯Ÿç›®æ ‡">1. è®¾ç½®è§‚å¯Ÿç›®æ ‡</a></li><li><a href="#_2-åˆ›å»º-intersectionobserver-å®ä¾‹">2. åˆ›å»º IntersectionObserver å®ä¾‹</a></li><li><a href="#_3-é¦–æ¬¡åŠ è½½ä¿æŠ¤">3. é¦–æ¬¡åŠ è½½ä¿æŠ¤</a></li><li><a href="#_4-é¡µç å˜åŒ–æ—¶åŠ è½½ä¸‹ä¸€é¡µ">4. é¡µç å˜åŒ–æ—¶åŠ è½½ä¸‹ä¸€é¡µ</a></li></ul></li><li><a href="#ğŸ’¡-å…­ã€rootmargin-çš„å¦™ç”¨">ğŸ’¡ å…­ã€rootMargin çš„å¦™ç”¨</a></li><li><a href="#æ€»ç»“">æ€»ç»“</a></li></ul></nav><p>åœ¨ç°ä»£å‰ç«¯å¼€å‘ä¸­ï¼Œ<strong>æ‡’åŠ è½½ï¼ˆLazy Loadingï¼‰</strong> å·²ç»æˆä¸ºä¼˜åŒ–æ€§èƒ½å’Œæå‡ç”¨æˆ·ä½“éªŒçš„æ ‡é…åŠŸèƒ½ä¹‹ä¸€ã€‚å°¤å…¶æ˜¯åœ¨åˆ—è¡¨ç±»é¡µé¢ï¼ˆå¦‚æ–‡ç« åˆ—è¡¨ã€åˆ¶åº¦æ–‡æ¡£ã€å›¾ç‰‡å¢™ç­‰ï¼‰ä¸­ï¼Œ<strong>ä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰æ•°æ®ä¸ä»…æµªè´¹æµé‡ï¼Œè¿˜å¯èƒ½é€ æˆé¡µé¢å¡é¡¿</strong>ã€‚</p><p>æœ¬æ–‡å°†ä»¥ä¸€ä¸ªå®é™…é¡¹ç›®ä¸ºä¾‹ï¼Œè®²è§£å¦‚ä½•ä½¿ç”¨ <strong>IntersectionObserver API</strong> å®ç°ä¼˜é›…çš„å‰ç«¯æ‡’åŠ è½½ã€‚</p><h2 id="ğŸŒŸ-ä¸€ã€ä»€ä¹ˆæ˜¯-intersectionobserver" tabindex="-1">ğŸŒŸ ä¸€ã€ä»€ä¹ˆæ˜¯ IntersectionObserverï¼Ÿ <a class="header-anchor" href="#ğŸŒŸ-ä¸€ã€ä»€ä¹ˆæ˜¯-intersectionobserver" aria-label="Permalink to &quot;ğŸŒŸ ä¸€ã€ä»€ä¹ˆæ˜¯ IntersectionObserverï¼Ÿ&quot;">â€‹</a></h2><p><code>IntersectionObserver</code> æ˜¯æµè§ˆå™¨åŸç”Ÿæä¾›çš„ä¸€ä¸ª <strong>å¯è§‚å¯Ÿå…ƒç´ å¯è§æ€§å˜åŒ–çš„ API</strong>ã€‚ç®€å•æ¥è¯´ï¼Œå®ƒèƒ½å¸®æˆ‘ä»¬â€œç›‘å¬â€æŸä¸ªå…ƒç´ æ˜¯å¦å‡ºç°åœ¨è§†å£ä¸­ã€‚</p><blockquote><p>å½“å…ƒç´ è¿›å…¥æˆ–ç¦»å¼€è§†å£æ—¶ï¼Œå›è°ƒå‡½æ•°ä¼šè¢«è§¦å‘ã€‚</p></blockquote><p><strong>æ ¸å¿ƒä¼˜åŠ¿ï¼š</strong></p><ul><li>ä¸éœ€è¦ç›‘å¬ <code>scroll</code> äº‹ä»¶ï¼›</li><li>æµè§ˆå™¨åŸç”Ÿæ”¯æŒï¼Œæ€§èƒ½æ›´å¥½ï¼›</li><li>å¯é…ç½® <code>rootMargin</code>ï¼ˆæå‰åŠ è½½è·ç¦»ï¼‰ï¼›</li><li>å¼‚æ­¥æ‰§è¡Œï¼Œä¸é˜»å¡ä¸»çº¿ç¨‹ã€‚</li></ul><h2 id="ğŸ§©-äºŒã€æ‡’åŠ è½½çš„å¸¸è§åº”ç”¨åœºæ™¯" tabindex="-1">ğŸ§© äºŒã€æ‡’åŠ è½½çš„å¸¸è§åº”ç”¨åœºæ™¯ <a class="header-anchor" href="#ğŸ§©-äºŒã€æ‡’åŠ è½½çš„å¸¸è§åº”ç”¨åœºæ™¯" aria-label="Permalink to &quot;ğŸ§© äºŒã€æ‡’åŠ è½½çš„å¸¸è§åº”ç”¨åœºæ™¯&quot;">â€‹</a></h2><ul><li><strong>å›¾ç‰‡æ‡’åŠ è½½</strong>ï¼šåªæœ‰å½“å›¾ç‰‡è¿›å…¥è§†å£æ—¶æ‰åŠ è½½èµ„æºï¼›</li><li><strong>æ— é™æ»šåŠ¨åˆ—è¡¨</strong>ï¼šå½“æ»šåŠ¨åˆ°åº•éƒ¨æ—¶ï¼Œè‡ªåŠ¨åŠ è½½ä¸‹ä¸€é¡µï¼›</li><li><strong>å¹¿å‘Šæ›å…‰ç›‘æµ‹</strong>ï¼šæ£€æµ‹å¹¿å‘ŠåŒºåŸŸæ˜¯å¦è¢«ç”¨æˆ·çœ‹åˆ°ã€‚</li></ul><p>æœ¬æ–‡èšç„¦ç¬¬äºŒç§ï¼š<strong>æ»šåŠ¨åˆ°åº•éƒ¨è‡ªåŠ¨åŠ è½½æ›´å¤šæ•°æ®</strong>ã€‚</p><h2 id="âš™ï¸-ä¸‰ã€åŠŸèƒ½ç›®æ ‡" tabindex="-1">âš™ï¸ ä¸‰ã€åŠŸèƒ½ç›®æ ‡ <a class="header-anchor" href="#âš™ï¸-ä¸‰ã€åŠŸèƒ½ç›®æ ‡" aria-label="Permalink to &quot;âš™ï¸ ä¸‰ã€åŠŸèƒ½ç›®æ ‡&quot;">â€‹</a></h2><p>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯æ„å»ºä¸€ä¸ªâ€œå»‰æ”¿åˆ¶åº¦â€é¡µé¢ï¼Œå½“ç”¨æˆ·æ»šåŠ¨åˆ°åˆ—è¡¨åº•éƒ¨æ—¶è‡ªåŠ¨åŠ è½½ä¸‹ä¸€é¡µæ•°æ®ã€‚</p><p>ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š</p><ol><li><strong>åˆæ¬¡åŠ è½½æ•°æ®</strong></li><li><strong>è¾“å…¥å…³é”®è¯æœç´¢</strong></li><li><strong>æ»šåŠ¨åˆ°åº•éƒ¨è§¦å‘åŠ è½½æ›´å¤š</strong></li><li><strong>é˜²æ­¢é¦–æ¬¡æ¸²æŸ“è¯¯è§¦å‘</strong></li><li><strong>æ•°æ®åŠ è½½å®Œæˆåå…³é—­åŠ è½½æç¤º</strong></li></ol><p><strong>å¦‚å›¾æ‰€ç¤ºï¼š</strong></p><p><img src="'+r+`" alt="" loading="lazy"></p><h2 id="ğŸ’»-å››ã€æ ¸å¿ƒå®ç°ä»£ç " tabindex="-1">ğŸ’» å››ã€æ ¸å¿ƒå®ç°ä»£ç  <a class="header-anchor" href="#ğŸ’»-å››ã€æ ¸å¿ƒå®ç°ä»£ç " aria-label="Permalink to &quot;ğŸ’» å››ã€æ ¸å¿ƒå®ç°ä»£ç &quot;">â€‹</a></h2><p>æ¥çœ‹å…³é”®éƒ¨åˆ†çš„å®ç°é€»è¾‘ï¼ˆå·²çœç•¥éƒ¨åˆ†ä¸šåŠ¡ä»£ç ï¼‰ï¼š</p><div class="language-tsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { useEffect, useState, useRef, useCallback } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;react&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { getEthicsRegulationList } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;../../api/backendApi&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PolicyList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">regulations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setRegulations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([]);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">page</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setPage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">hasMore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setHasMore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> observerRef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">HTMLDivElement</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> firstLoadRef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// âœ… åˆæ¬¡åŠ è½½ä¿æŠ¤æ ‡å¿—</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // è·å–æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> fetchData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useCallback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">reset</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> res</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getEthicsRegulationList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ page, size: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">7</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (reset) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        setRegulations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(res.content </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        setRegulations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">prev</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">prev, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(res.content </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [])]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      setHasMore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">res.last);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [page]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // åˆå§‹åŒ–åŠ è½½</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  useEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    fetchData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }, []);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // IntersectionObserver å®ç°æ‡’åŠ è½½</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  useEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">observerRef.current) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> observer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> IntersectionObserver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">entries</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> entry</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> entries[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // âœ… é¿å…ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶è§¦å‘åŠ è½½</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (entry.isIntersecting </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> hasMore </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">firstLoadRef.current) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">          setPage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">prev</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> prev </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      { rootMargin: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;100px&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æå‰ 100px è§¦å‘åŠ è½½</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    );</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    observer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">observe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(observerRef.current);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> observer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">disconnect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }, [hasMore]);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // é¡µç å˜åŒ–æ—¶åŠ è½½ä¸‹ä¸€é¡µ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  useEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (page </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    fetchData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }, [page]);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // é¦–æ¬¡åŠ è½½å®Œæˆåï¼Œå…³é—­â€œé¦–æ¬¡åŠ è½½ä¿æŠ¤â€</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  useEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (regulations.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      firstLoadRef.current </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }, [regulations]);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> className</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;policy-list&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {regulations.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">item</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">index</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{index} </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">className</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;policy-card&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          {item.title}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ))}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* è§‚å¯Ÿç‚¹ï¼ˆåŠ è½½è§¦å‘ç‚¹ï¼‰ */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{observerRef} </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">className</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;loading-more&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {hasMore </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;åŠ è½½æ›´å¤š...&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;å·²åŠ è½½å…¨éƒ¨&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PolicyList;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br></div></div><h2 id="ğŸ”-äº”ã€å®ç°æ€è·¯æ‹†è§£" tabindex="-1">ğŸ” äº”ã€å®ç°æ€è·¯æ‹†è§£ <a class="header-anchor" href="#ğŸ”-äº”ã€å®ç°æ€è·¯æ‹†è§£" aria-label="Permalink to &quot;ğŸ” äº”ã€å®ç°æ€è·¯æ‹†è§£&quot;">â€‹</a></h2><h3 id="_1-è®¾ç½®è§‚å¯Ÿç›®æ ‡" tabindex="-1">1. è®¾ç½®è§‚å¯Ÿç›®æ ‡ <a class="header-anchor" href="#_1-è®¾ç½®è§‚å¯Ÿç›®æ ‡" aria-label="Permalink to &quot;1. è®¾ç½®è§‚å¯Ÿç›®æ ‡&quot;">â€‹</a></h3><p>æˆ‘ä»¬åœ¨åˆ—è¡¨åº•éƒ¨æ”¾ç½®ä¸€ä¸ªç©ºçš„ <code>&lt;div&gt;</code>ï¼š</p><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{observerRef}&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> className</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;loading-more&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>è¿™ä¸ªå…ƒç´ å°±æ˜¯â€œè§¦å‘ç‚¹â€â€”â€”å½“å®ƒå‡ºç°åœ¨è§†å£ä¸­æ—¶ï¼Œå°±æ„å‘³ç€ç”¨æˆ·æ»šåŠ¨åˆ°åº•éƒ¨ã€‚</p><h3 id="_2-åˆ›å»º-intersectionobserver-å®ä¾‹" tabindex="-1">2. åˆ›å»º IntersectionObserver å®ä¾‹ <a class="header-anchor" href="#_2-åˆ›å»º-intersectionobserver-å®ä¾‹" aria-label="Permalink to &quot;2. åˆ›å»º IntersectionObserver å®ä¾‹&quot;">â€‹</a></h3><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> observer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> IntersectionObserver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">entries</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> entry</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> entries[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (entry.isIntersecting </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> hasMore) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      setPage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">prev</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> prev </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  { rootMargin: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;100px&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li><p><code>entries[0].isIntersecting</code>ï¼šè¡¨ç¤ºç›®æ ‡å…ƒç´ æ˜¯å¦è¿›å…¥è§†å£ï¼›</p></li><li><p><code>rootMargin</code>ï¼šè®¾ç½®â€œæå‰åŠ è½½â€çš„è·ç¦»ï¼›</p><ul><li>ä¾‹å¦‚ <code>&quot;100px&quot;</code> è¡¨ç¤ºå½“å…ƒç´ è·ç¦»è§†å£åº•éƒ¨ 100px æ—¶å°±è§¦å‘ã€‚</li></ul></li></ul><h3 id="_3-é¦–æ¬¡åŠ è½½ä¿æŠ¤" tabindex="-1">3. é¦–æ¬¡åŠ è½½ä¿æŠ¤ <a class="header-anchor" href="#_3-é¦–æ¬¡åŠ è½½ä¿æŠ¤" aria-label="Permalink to &quot;3. é¦–æ¬¡åŠ è½½ä¿æŠ¤&quot;">â€‹</a></h3><p>é¦–æ¬¡æ¸²æŸ“æ—¶ï¼Œè§‚å¯Ÿç›®æ ‡å¾€å¾€é»˜è®¤å¯è§ï¼Œä¼šè¯¯è§¦å‘åŠ è½½ã€‚</p><p>å› æ­¤ä½¿ç”¨ä¸€ä¸ª <code>useRef</code> æ ‡è®°ï¼š</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> firstLoadRef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (regulations.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    firstLoadRef.current </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, [regulations]);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>åœ¨æ‡’åŠ è½½é€»è¾‘ä¸­å¢åŠ åˆ¤æ–­ï¼š</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (entry.isIntersecting </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> hasMore </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">firstLoadRef.current) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  setPage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">prev</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> prev </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_4-é¡µç å˜åŒ–æ—¶åŠ è½½ä¸‹ä¸€é¡µ" tabindex="-1">4. é¡µç å˜åŒ–æ—¶åŠ è½½ä¸‹ä¸€é¡µ <a class="header-anchor" href="#_4-é¡µç å˜åŒ–æ—¶åŠ è½½ä¸‹ä¸€é¡µ" aria-label="Permalink to &quot;4. é¡µç å˜åŒ–æ—¶åŠ è½½ä¸‹ä¸€é¡µ&quot;">â€‹</a></h3><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (page </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åˆæ¬¡åŠ è½½å·²å¤„ç†</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  fetchData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, [page]);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>å½“ <code>page</code> å˜åŒ–æ—¶é‡æ–°è¯·æ±‚æ•°æ®ï¼Œå¹¶å°†ç»“æœè¿½åŠ åˆ°å·²æœ‰æ•°æ®ä¸­ã€‚</p><h2 id="ğŸ’¡-å…­ã€rootmargin-çš„å¦™ç”¨" tabindex="-1">ğŸ’¡ å…­ã€rootMargin çš„å¦™ç”¨ <a class="header-anchor" href="#ğŸ’¡-å…­ã€rootmargin-çš„å¦™ç”¨" aria-label="Permalink to &quot;ğŸ’¡ å…­ã€rootMargin çš„å¦™ç”¨&quot;">â€‹</a></h2><p><code>rootMargin</code> æ˜¯æ‡’åŠ è½½çš„â€œæå‰é‡â€ã€‚å‡è®¾è®¾ç½®ä¸º <code>&quot;100px&quot;</code>ï¼Œæ„å‘³ç€å½“åº•éƒ¨è§¦å‘ç‚¹è·ç¦»è§†å£åº•éƒ¨è¿˜æœ‰ 100px æ—¶å°±å¼€å§‹åŠ è½½ï¼Œé¿å…æ»šåŠ¨åˆ°åº•æ‰è§¦å‘ã€ç”¨æˆ·ç­‰å¾…çš„å¡é¡¿æ„Ÿã€‚</p><h2 id="æ€»ç»“" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“" aria-label="Permalink to &quot;æ€»ç»“&quot;">â€‹</a></h2><table tabindex="0"><thead><tr><th>å¯¹æ¯”é¡¹</th><th>IntersectionObserver</th><th>scroll äº‹ä»¶ç›‘å¬</th></tr></thead><tbody><tr><td>æ€§èƒ½</td><td>å¼‚æ­¥æ‰§è¡Œï¼Œæµè§ˆå™¨ä¼˜åŒ–</td><td>é«˜é¢‘è§¦å‘ï¼Œéœ€æ‰‹åŠ¨èŠ‚æµ</td></tr><tr><td>å¯ç»´æŠ¤æ€§</td><td>ç®€æ´æ˜äº†ï¼Œé…ç½®çµæ´»</td><td>é€»è¾‘å¤æ‚</td></tr><tr><td>æ”¯æŒæ€§</td><td>ç°ä»£æµè§ˆå™¨åŸç”Ÿæ”¯æŒ</td><td>æ‰€æœ‰æµè§ˆå™¨é€šç”¨</td></tr></tbody></table><blockquote><p>ğŸ’¬ æ‡’åŠ è½½å¹¶ä¸åªæ˜¯â€œå°‘åŠ è½½â€ï¼Œè€Œæ˜¯è®©â€œç”¨æˆ·æ„Ÿè§‰å¿«â€ã€‚</p></blockquote><p>è¿™æ‰æ˜¯ç°ä»£å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒæ€æƒ³ã€‚</p>`,43))])}const m=n(E,[["render",d]]);export{u as __pageData,m as default};
