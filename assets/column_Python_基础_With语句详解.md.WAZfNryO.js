import{_ as n,C as e,c as l,o as t,j as i,G as p,a2 as h,a as k}from"./chunks/framework.DrNAj9nU.js";const b=JSON.parse('{"title":"Python çš„ with è¯­å¥ï¼šæŠŠã€Œèµ„æºç®¡ç†ã€è¿™ä»¶äº‹äº¤ç»™è¯­æ³•","description":"","frontmatter":{},"headers":[],"relativePath":"column/Python/åŸºç¡€/Withè¯­å¥è¯¦è§£.md","filePath":"column/Python/åŸºç¡€/Withè¯­å¥è¯¦è§£.md","lastUpdated":1769590824000}'),r={name:"column/Python/åŸºç¡€/Withè¯­å¥è¯¦è§£.md"};function d(o,s,c,E,g,y){const a=e("ArticleMetadata");return t(),l("div",null,[s[0]||(s[0]=i("h1",{id:"python-çš„-with-è¯­å¥-æŠŠã€Œèµ„æºç®¡ç†ã€è¿™ä»¶äº‹äº¤ç»™è¯­æ³•",tabindex:"-1"},[k("Python çš„ with è¯­å¥ï¼šæŠŠã€Œèµ„æºç®¡ç†ã€è¿™ä»¶äº‹äº¤ç»™è¯­æ³• "),i("a",{class:"header-anchor",href:"#python-çš„-with-è¯­å¥-æŠŠã€Œèµ„æºç®¡ç†ã€è¿™ä»¶äº‹äº¤ç»™è¯­æ³•","aria-label":'Permalink to "Python çš„ with è¯­å¥ï¼šæŠŠã€Œèµ„æºç®¡ç†ã€è¿™ä»¶äº‹äº¤ç»™è¯­æ³•"'},"â€‹")],-1)),p(a),s[1]||(s[1]=h(`<p>åœ¨ <code>Python</code> é‡Œï¼Œä½ ç»å¸¸ä¼šçœ‹åˆ°è¿™æ ·çš„ä»£ç ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">with</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sql_file, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;r&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">encoding</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;utf-8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> f:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        sql_content </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> f.read()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>å¾ˆå¤šäººçŸ¥é“å®ƒâ€œæ›´å®‰å…¨â€ï¼Œä½†å¹¶ä¸çœŸæ­£æ¸…æ¥šï¼š</p><ul><li><code>with</code> åˆ°åº•è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ</li><li>å®ƒå’Œ <code>try / finally</code> æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ</li><li>è‡ªå·±èƒ½ä¸èƒ½å†™ä¸€ä¸ª <code>with</code>ï¼Ÿ</li></ul><p>è¿™ç¯‡æ–‡ç« ä¸€æ¬¡è®²æ¸…æ¥šã€‚</p><h2 id="ä¸€ã€with-è¯­å¥æ˜¯å¹²ä»€ä¹ˆçš„" tabindex="-1">ä¸€ã€with è¯­å¥æ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿ <a class="header-anchor" href="#ä¸€ã€with-è¯­å¥æ˜¯å¹²ä»€ä¹ˆçš„" aria-label="Permalink to &quot;ä¸€ã€with è¯­å¥æ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿ&quot;">â€‹</a></h2><div class="tip custom-block"><p class="custom-block-title">ä¸€å¥è¯æ¦‚æ‹¬</p><p><code>with</code> ç”¨æ¥è‡ªåŠ¨ç®¡ç†èµ„æºçš„â€œç”³è¯·ä¸é‡Šæ”¾</p></div><p>å¸¸è§èµ„æºåŒ…æ‹¬ï¼š</p><ul><li>æ–‡ä»¶</li><li>ç½‘ç»œè¿æ¥</li><li>æ•°æ®åº“è¿æ¥</li><li>é”ï¼ˆLockï¼‰</li><li>ä¸´æ—¶çŠ¶æ€</li></ul><p>æ ¸å¿ƒç›®æ ‡åªæœ‰ä¸€ä¸ªï¼š ğŸ‘‰ <strong>ä¸ç®¡ä¸­é—´å‘ç”Ÿä»€ä¹ˆï¼Œæœ€åä¸€å®šèƒ½æ­£ç¡®æ¸…ç†</strong></p><h2 id="äºŒã€ä¸ç”¨-with-ä¼šå‘ç”Ÿä»€ä¹ˆ" tabindex="-1">äºŒã€ä¸ç”¨ with ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ <a class="header-anchor" href="#äºŒã€ä¸ç”¨-with-ä¼šå‘ç”Ÿä»€ä¹ˆ" aria-label="Permalink to &quot;äºŒã€ä¸ç”¨ with ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ&quot;">â€‹</a></h2><p>ä»¥æ–‡ä»¶æ“ä½œä¸ºä¾‹ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">f </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;test.txt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;r&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">content </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> f.read()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">f.close()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>çœ‹èµ·æ¥æ²¡é—®é¢˜ï¼Œä½†ä¸€æ—¦ä¸­é—´å‡ºé”™ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">f </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;test.txt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;r&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">content </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> f.read()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">raise</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Exception</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;boom&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">f.close()  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ°¸è¿œæ‰§è¡Œä¸åˆ°</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>èµ„æºæ³„æ¼é£é™©ç«‹åˆ»å‡ºç°ã€‚</p><h2 id="ä¸‰ã€ä¼ ç»Ÿè§£æ³•-try-finally" tabindex="-1">ä¸‰ã€ä¼ ç»Ÿè§£æ³•ï¼štry / finally <a class="header-anchor" href="#ä¸‰ã€ä¼ ç»Ÿè§£æ³•-try-finally" aria-label="Permalink to &quot;ä¸‰ã€ä¼ ç»Ÿè§£æ³•ï¼štry / finally&quot;">â€‹</a></h2><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">f </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;test.txt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;r&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    content </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> f.read()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    f.close()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>âœ… å®‰å…¨ âŒ å†—é•¿ âŒ å®¹æ˜“å¿˜</p><h2 id="å››ã€with-çš„æœ¬è´¨-è¯­æ³•çº§-try-finally" tabindex="-1">å››ã€with çš„æœ¬è´¨ï¼šè¯­æ³•çº§ try / finally <a class="header-anchor" href="#å››ã€with-çš„æœ¬è´¨-è¯­æ³•çº§-try-finally" aria-label="Permalink to &quot;å››ã€with çš„æœ¬è´¨ï¼šè¯­æ³•çº§ try / finally&quot;">â€‹</a></h2><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">with</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;test.txt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;r&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> f:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    content </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> f.read()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ç­‰ä»·äºï¼ˆç®€åŒ–ç‰ˆï¼‰ğŸ‘‡</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">f </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;test.txt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;r&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    content </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> f.read()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    f.close()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>ğŸ‘‰ <strong>with åªæ˜¯æŠŠâ€œæ¨¡æ¿ä»£ç â€äº¤ç»™äº†è¯­æ³•</strong></p><h2 id="äº”ã€ä¸Šä¸‹æ–‡ç®¡ç†å™¨-context-manager" tabindex="-1">äº”ã€ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼ˆContext Managerï¼‰ <a class="header-anchor" href="#äº”ã€ä¸Šä¸‹æ–‡ç®¡ç†å™¨-context-manager" aria-label="Permalink to &quot;äº”ã€ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼ˆContext Managerï¼‰&quot;">â€‹</a></h2><p>èƒ½è¢« <code>with</code> ä½¿ç”¨çš„å¯¹è±¡ï¼Œå¿…é¡»æ»¡è¶³ä¸€ä¸ªæ¡ä»¶ï¼š</p><blockquote><p><strong>å®ç°ä¸Šä¸‹æ–‡ç®¡ç†åè®®</strong></p></blockquote><p>ä¹Ÿå°±æ˜¯è¿™ä¸¤ä¸ªæ–¹æ³•ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">__enter__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">__exit__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(exc_type, exc_val, exc_tb)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_5-1-ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­" tabindex="-1">5.1 ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­ <a class="header-anchor" href="#_5-1-ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­" aria-label="Permalink to &quot;5.1 ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FileManager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, filename):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.filename </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> filename</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __enter__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.file </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.filename, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;r&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.file</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __exit__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, exc_type, exc_val, exc_tb):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.file.close()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>ä½¿ç”¨ï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> FileManager(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;test.txt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> f:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(f.read())</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_5-2-enter-å’Œ-exit-åˆ°åº•å¹²äº†ä»€ä¹ˆ" tabindex="-1">5.2 <code>__enter__</code> å’Œ <code>__exit__</code> åˆ°åº•å¹²äº†ä»€ä¹ˆï¼Ÿ <a class="header-anchor" href="#_5-2-enter-å’Œ-exit-åˆ°åº•å¹²äº†ä»€ä¹ˆ" aria-label="Permalink to &quot;5.2 \`__enter__\` å’Œ \`__exit__\` åˆ°åº•å¹²äº†ä»€ä¹ˆï¼Ÿ&quot;">â€‹</a></h3><p><strong><code>__enter__</code></strong></p><ul><li>åœ¨ <code>with</code> ä»£ç å—å¼€å§‹å‰æ‰§è¡Œ</li><li>è¿”å›å€¼ç»‘å®šç»™ <code>as</code> åçš„å˜é‡</li></ul><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> obj() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    ...</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># x å°±æ˜¯ obj.__enter__() çš„è¿”å›å€¼</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong><code>__exit__</code></strong></p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">__exit__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(exc_type, exc_val, exc_tb)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>ä»£ç å—ç»“æŸæ—¶ä¸€å®šæ‰§è¡Œ</li><li>ä¸è®ºæ˜¯å¦å‘ç”Ÿå¼‚å¸¸</li><li>å¯ä»¥é€‰æ‹©æ˜¯å¦â€œåæ‰å¼‚å¸¸â€</li></ul><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __exit__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, exc_type, exc_val, exc_tb):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> True</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # å¼‚å¸¸è¢«åæ‰</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ğŸ‘‰ ä¸€èˆ¬ <strong>ä¸å»ºè®®åå¼‚å¸¸</strong></p><h2 id="å…­ã€å¸¸è§-with-ä½¿ç”¨åœºæ™¯" tabindex="-1">å…­ã€å¸¸è§ with ä½¿ç”¨åœºæ™¯ <a class="header-anchor" href="#å…­ã€å¸¸è§-with-ä½¿ç”¨åœºæ™¯" aria-label="Permalink to &quot;å…­ã€å¸¸è§ with ä½¿ç”¨åœºæ™¯&quot;">â€‹</a></h2><h3 id="_6-1-æ–‡ä»¶æ“ä½œ-æœ€å¸¸è§" tabindex="-1">6.1 æ–‡ä»¶æ“ä½œï¼ˆæœ€å¸¸è§ï¼‰ <a class="header-anchor" href="#_6-1-æ–‡ä»¶æ“ä½œ-æœ€å¸¸è§" aria-label="Permalink to &quot;6.1 æ–‡ä»¶æ“ä½œï¼ˆæœ€å¸¸è§ï¼‰&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">with</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a.txt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> f:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    ...</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_6-2-é”-å¤šçº¿ç¨‹" tabindex="-1">6.2 é”ï¼ˆå¤šçº¿ç¨‹ï¼‰ <a class="header-anchor" href="#_6-2-é”-å¤šçº¿ç¨‹" aria-label="Permalink to &quot;6.2 é”ï¼ˆå¤šçº¿ç¨‹ï¼‰&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> threading </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Lock</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">lock </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Lock()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lock:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    ...</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_6-3-æ•°æ®åº“è¿æ¥" tabindex="-1">6.3 æ•°æ®åº“è¿æ¥ <a class="header-anchor" href="#_6-3-æ•°æ®åº“è¿æ¥" aria-label="Permalink to &quot;6.3 æ•°æ®åº“è¿æ¥&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> db.connect() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> conn:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    ...</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_6-4-ä¸´æ—¶ä¿®æ”¹çŠ¶æ€" tabindex="-1">6.4 ä¸´æ—¶ä¿®æ”¹çŠ¶æ€ <a class="header-anchor" href="#_6-4-ä¸´æ—¶ä¿®æ”¹çŠ¶æ€" aria-label="Permalink to &quot;6.4 ä¸´æ—¶ä¿®æ”¹çŠ¶æ€&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tempfile.TemporaryDirectory() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tmp:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    ...</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div>`,51))])}const m=n(r,[["render",d]]);export{b as __pageData,m as default};
