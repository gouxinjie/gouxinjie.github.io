import{_ as n,C as e,c as t,o as l,j as i,G as h,aQ as p,a as k}from"./chunks/framework.DEi4YP2n.js";const b=JSON.parse('{"title":"React 18 å¹¶å‘ç‰¹æ€§æ ¸å¿ƒä¹‹ä¸€ï¼šuseDeferredValue","description":"","frontmatter":{},"headers":[],"relativePath":"column/React/Hooks/useDeferredValue.md","filePath":"column/React/Hooks/useDeferredValue.md","lastUpdated":1760075323000}'),r={name:"column/React/Hooks/useDeferredValue.md"};function d(E,s,g,u,c,y){const a=e("ArticleMetadata");return l(),t("div",null,[s[0]||(s[0]=i("h1",{id:"react-18-å¹¶å‘ç‰¹æ€§æ ¸å¿ƒä¹‹ä¸€-usedeferredvalue",tabindex:"-1"},[k("React 18 å¹¶å‘ç‰¹æ€§æ ¸å¿ƒä¹‹ä¸€ï¼šuseDeferredValue "),i("a",{class:"header-anchor",href:"#react-18-å¹¶å‘ç‰¹æ€§æ ¸å¿ƒä¹‹ä¸€-usedeferredvalue","aria-label":'Permalink to "React 18 å¹¶å‘ç‰¹æ€§æ ¸å¿ƒä¹‹ä¸€ï¼šuseDeferredValue"'},"â€‹")],-1)),h(a),s[1]||(s[1]=p(`<nav class="table-of-contents"><ul><li><a href="#ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦-usedeferredvalue">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦ useDeferredValueï¼Ÿ</a></li><li><a href="#äºŒã€usedeferredvalue-æ˜¯ä»€ä¹ˆ">äºŒã€useDeferredValue æ˜¯ä»€ä¹ˆï¼Ÿ</a><ul><li><a href="#ğŸ“˜-è¯­æ³•">ğŸ“˜ è¯­æ³•ï¼š</a></li></ul></li><li><a href="#ä¸‰ã€åŸºç¡€ç¤ºä¾‹-è¾“å…¥é˜²å¡é¡¿">ä¸‰ã€åŸºç¡€ç¤ºä¾‹ï¼šè¾“å…¥é˜²å¡é¡¿</a></li><li><a href="#å››ã€å·¥ä½œåŸç†">å››ã€å·¥ä½œåŸç†</a></li><li><a href="#äº”ã€usetransition-vs-usedeferredvalue-å¯¹æ¯”">äº”ã€useTransition vs useDeferredValue å¯¹æ¯”</a></li><li><a href="#å…­ã€å®æˆ˜æ¡ˆä¾‹-æœç´¢åˆ—è¡¨ä¼˜åŒ–">å…­ã€å®æˆ˜æ¡ˆä¾‹ï¼šæœç´¢åˆ—è¡¨ä¼˜åŒ–</a></li><li><a href="#ä¸ƒã€æ€§èƒ½åŸç†è§£æ-ç›´è§‚ç†è§£">ä¸ƒã€æ€§èƒ½åŸç†è§£æï¼ˆç›´è§‚ç†è§£ï¼‰</a></li><li><a href="#å…«ã€ä¸é˜²æŠ–-debounce-çš„åŒºåˆ«">å…«ã€ä¸é˜²æŠ–ï¼ˆdebounceï¼‰çš„åŒºåˆ«</a></li><li><a href="#ä¹ã€æœ€ä½³å®è·µ">ä¹ã€æœ€ä½³å®è·µ</a></li></ul></nav><blockquote><p>React 18 å¼•å…¥çš„å¹¶å‘ç‰¹æ€§è®© UI æ¸²æŸ“æ›´ä¸æ»‘ï¼Œå…¶ä¸­ <code>useDeferredValue</code> æ˜¯ä¸€ä¸ªâ€œ<strong>è‡ªåŠ¨å»¶è¿ŸæŸä¸ªå€¼æ›´æ–°</strong>â€çš„ Hookï¼Œå¯ä»¥è®©ä½ çš„ç»„ä»¶åœ¨å¤„ç†å¤§é‡æ•°æ®æˆ–å¤æ‚æ¸²æŸ“æ—¶ä¿æŒæµç•…çš„äº¤äº’ä½“éªŒã€‚</p></blockquote><h2 id="ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦-usedeferredvalue" tabindex="-1">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦ useDeferredValueï¼Ÿ <a class="header-anchor" href="#ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦-usedeferredvalue" aria-label="Permalink to &quot;ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦ useDeferredValueï¼Ÿ&quot;">â€‹</a></h2><p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°è¿™æ ·çš„åœºæ™¯ ğŸ‘‡</p><p>ç”¨æˆ·è¾“å…¥ä¸€ä¸ªæœç´¢æ¡†ï¼Œè¾“å…¥çš„å€¼ä¼šè§¦å‘ä¸€ä¸ª<strong>æ˜‚è´µçš„è®¡ç®—æˆ–è¿‡æ»¤æ“ä½œ</strong>ï¼š</p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SearchApp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> filteredList</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> heavyFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(query); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è€—æ—¶æ“ä½œ</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">input</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{query} </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onChange</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(e.target.value)} /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">List</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{filteredList} /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>ğŸ’¥ é—®é¢˜ï¼š</p><ul><li>æ¯æ¬¡ç”¨æˆ·è¾“å…¥éƒ½ä¼šç«‹å³è§¦å‘è®¡ç®—ï¼›</li><li><code>heavyFilter</code> é€ æˆå¡é¡¿ï¼›</li><li>è¾“å…¥å˜å¾—ä¸æµç•…ã€‚</li></ul><h2 id="äºŒã€usedeferredvalue-æ˜¯ä»€ä¹ˆ" tabindex="-1">äºŒã€useDeferredValue æ˜¯ä»€ä¹ˆï¼Ÿ <a class="header-anchor" href="#äºŒã€usedeferredvalue-æ˜¯ä»€ä¹ˆ" aria-label="Permalink to &quot;äºŒã€useDeferredValue æ˜¯ä»€ä¹ˆï¼Ÿ&quot;">â€‹</a></h2><blockquote><p><code>useDeferredValue</code> ä¼šè®©ä¸€ä¸ªå€¼çš„æ›´æ–°â€œ<strong>å»¶è¿Ÿç”Ÿæ•ˆ</strong>â€ï¼Œä»è€Œé¿å…è€—æ—¶æ¸²æŸ“é˜»å¡ç”¨æˆ·çš„è¾“å…¥ã€‚</p></blockquote><p>ç®€å•æ¥è¯´ï¼š</p><blockquote><p>å®ƒæ˜¯ä¸€ä¸ªâ€œè¢«åŠ¨çš„ useTransitionâ€ã€‚</p></blockquote><h3 id="ğŸ“˜-è¯­æ³•" tabindex="-1">ğŸ“˜ è¯­æ³•ï¼š <a class="header-anchor" href="#ğŸ“˜-è¯­æ³•" aria-label="Permalink to &quot;ğŸ“˜ è¯­æ³•ï¼š&quot;">â€‹</a></h3><div class="language-tsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> deferredValue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useDeferredValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(value);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><table tabindex="0"><thead><tr><th>å‚æ•°</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>value</code></td><td>any</td><td>åŸå§‹å€¼</td></tr><tr><td>è¿”å›å€¼</td><td>any</td><td>React å»¶è¿Ÿæ›´æ–°åçš„å€¼</td></tr></tbody></table><h2 id="ä¸‰ã€åŸºç¡€ç¤ºä¾‹-è¾“å…¥é˜²å¡é¡¿" tabindex="-1">ä¸‰ã€åŸºç¡€ç¤ºä¾‹ï¼šè¾“å…¥é˜²å¡é¡¿ <a class="header-anchor" href="#ä¸‰ã€åŸºç¡€ç¤ºä¾‹-è¾“å…¥é˜²å¡é¡¿" aria-label="Permalink to &quot;ä¸‰ã€åŸºç¡€ç¤ºä¾‹ï¼šè¾“å…¥é˜²å¡é¡¿&quot;">â€‹</a></h2><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> React, { useState, useDeferredValue } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;react&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SearchApp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> deferredQuery</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useDeferredValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(query); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å»¶è¿Ÿ query æ›´æ–°</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> list</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> heavyFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(deferredQuery);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">input</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{query} </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onChange</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(e.target.value)} /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {query </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> deferredQuery </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;åŠ è½½ä¸­...&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">List</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{list} /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>âœ… æ•ˆæœï¼š</p><ul><li>ç”¨æˆ·è¾“å…¥ç«‹å³æ›´æ–° <code>query</code>ï¼›</li><li><code>deferredQuery</code> ä¼šç¨å¾®å»¶è¿Ÿï¼›</li><li><code>heavyFilter()</code> åœ¨æµè§ˆå™¨ç©ºé—²æ—¶æ‰§è¡Œï¼›</li><li>è¾“å…¥ä¸å¡é¡¿ã€‚</li></ul><h2 id="å››ã€å·¥ä½œåŸç†" tabindex="-1">å››ã€å·¥ä½œåŸç† <a class="header-anchor" href="#å››ã€å·¥ä½œåŸç†" aria-label="Permalink to &quot;å››ã€å·¥ä½œåŸç†&quot;">â€‹</a></h2><p><code>useDeferredValue</code> çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š</p><blockquote><p>React å°†ä¼ å…¥çš„å€¼è§†ä¸ºâ€œä½ä¼˜å…ˆçº§ä»»åŠ¡â€ï¼Œå½“æµè§ˆå™¨ç©ºé—²æ—¶å†æ›´æ–°è¯¥å€¼ï¼Œä»è€Œé¿å…é˜»å¡æ›´é‡è¦çš„æ¸²æŸ“ã€‚</p></blockquote><p>ä¹Ÿå°±æ˜¯è¯´ï¼š</p><ul><li>å½“ <code>value</code>ï¼ˆä¾‹å¦‚è¾“å…¥æ¡†å€¼ï¼‰é¢‘ç¹å˜åŒ–æ—¶ï¼Œ</li><li><code>deferredValue</code> ä¸ä¼šç«‹åˆ»å˜åŒ–ï¼Œ</li><li>React ä¼šç­‰ä¸»çº¿ç¨‹ç©ºé—²åå†æ›´æ–°å®ƒã€‚</li></ul><p>è¿™æ ·ï¼Œç”¨æˆ·äº¤äº’å§‹ç»ˆæµç•…ï¼Œè€Œæ˜‚è´µçš„æ›´æ–°å¯ä»¥ç¨åæ‰§è¡Œã€‚</p><h2 id="äº”ã€usetransition-vs-usedeferredvalue-å¯¹æ¯”" tabindex="-1">äº”ã€useTransition vs useDeferredValue å¯¹æ¯” <a class="header-anchor" href="#äº”ã€usetransition-vs-usedeferredvalue-å¯¹æ¯”" aria-label="Permalink to &quot;äº”ã€useTransition vs useDeferredValue å¯¹æ¯”&quot;">â€‹</a></h2><table tabindex="0"><thead><tr><th>ç‰¹æ€§</th><th>useTransition</th><th>useDeferredValue</th></tr></thead><tbody><tr><td>è°ƒç”¨æ–¹å¼</td><td>ä¸»åŠ¨åŒ…è£¹æ›´æ–°é€»è¾‘</td><td>è¢«åŠ¨å»¶è¿Ÿå€¼</td></tr><tr><td>ä½¿ç”¨åœºæ™¯</td><td>æ§åˆ¶â€œæŸæ®µé€»è¾‘â€å»¶è¿Ÿæ‰§è¡Œ</td><td>æ§åˆ¶â€œæŸä¸ªå€¼â€å»¶è¿Ÿç”Ÿæ•ˆ</td></tr><tr><td>è¿”å›å€¼</td><td><code>[isPending, startTransition]</code></td><td><code>deferredValue</code></td></tr><tr><td>æ›´æ–°è§¦å‘</td><td>ç”±ä½ å†³å®šï¼ˆä¸»åŠ¨ï¼‰</td><td>React è‡ªåŠ¨è°ƒåº¦ï¼ˆè¢«åŠ¨ï¼‰</td></tr><tr><td>å¸¸ç”¨åœºæ™¯</td><td>æœç´¢ã€åˆ†é¡µã€å¯¼èˆª</td><td>è¾“å…¥æ¡†å€¼ã€é˜²æŠ–æ¸²æŸ“</td></tr></tbody></table><p>ğŸ’¡ ç®€å•ç†è§£ï¼š</p><blockquote><p><code>useTransition</code> æ˜¯â€œæ‰‹åŠ¨å»¶è¿Ÿæ›´æ–°â€ï¼Œ <code>useDeferredValue</code> æ˜¯â€œè‡ªåŠ¨å»¶è¿ŸæŸä¸ªå€¼â€ã€‚</p></blockquote><h2 id="å…­ã€å®æˆ˜æ¡ˆä¾‹-æœç´¢åˆ—è¡¨ä¼˜åŒ–" tabindex="-1">å…­ã€å®æˆ˜æ¡ˆä¾‹ï¼šæœç´¢åˆ—è¡¨ä¼˜åŒ– <a class="header-anchor" href="#å…­ã€å®æˆ˜æ¡ˆä¾‹-æœç´¢åˆ—è¡¨ä¼˜åŒ–" aria-label="Permalink to &quot;å…­ã€å®æˆ˜æ¡ˆä¾‹ï¼šæœç´¢åˆ—è¡¨ä¼˜åŒ–&quot;">â€‹</a></h2><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> React, { useState, useDeferredValue } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;react&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> bigList</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Array.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ length: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">_</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">i</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`Item \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Search</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> deferredText</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useDeferredValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(text);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> filtered</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> bigList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">item</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> item.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toLowerCase</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(deferredText.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toLowerCase</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">input</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{text} </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onChange</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(e.target.value)} </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">placeholder</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è¾“å…¥æœç´¢å…³é”®å­—&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {text </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> deferredText </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;ç­›é€‰ä¸­...&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">ul</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {filtered.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">item</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">li</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{item}&gt;{item}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">li</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ))}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">ul</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>âœ… ä¼˜ç‚¹ï¼š</p><ul><li>è¾“å…¥æ¡†å“åº”ç«‹åˆ»ï¼›</li><li>æ•°æ®è¿‡æ»¤å»¶åæ‰§è¡Œï¼›</li><li>UI ä¸æ»‘æ— é˜»å¡ã€‚</li></ul><h2 id="ä¸ƒã€æ€§èƒ½åŸç†è§£æ-ç›´è§‚ç†è§£" tabindex="-1">ä¸ƒã€æ€§èƒ½åŸç†è§£æï¼ˆç›´è§‚ç†è§£ï¼‰ <a class="header-anchor" href="#ä¸ƒã€æ€§èƒ½åŸç†è§£æ-ç›´è§‚ç†è§£" aria-label="Permalink to &quot;ä¸ƒã€æ€§èƒ½åŸç†è§£æï¼ˆç›´è§‚ç†è§£ï¼‰&quot;">â€‹</a></h2><p>æƒ³è±¡ä¸¤ä¸ªæ—¶é—´è½´ï¼š</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ç”¨æˆ·è¾“å…¥ (é«˜ä¼˜å…ˆçº§)  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>                                   â””â”€â”€â–º é©¬ä¸Šæ‰§è¡Œ</span></span>
<span class="line"><span>è¿‡æ»¤é€»è¾‘ (ä½ä¼˜å…ˆçº§)   â”€â”€â”€â”€â”€â”€â”€â”€ å»¶åæ‰§è¡Œ</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>React ä¼šåœ¨æµè§ˆå™¨ç©ºé—²æ—¶æ›´æ–° <code>deferredValue</code>ï¼›</li><li>è¿™æ ·ä¸ä¼šå¡ä½ç”¨æˆ·çš„è¾“å…¥ï¼›</li><li>å½“ç©ºé—²åæ‰è§¦å‘è€—æ—¶æ¸²æŸ“ã€‚</li></ul><p>è¿™æ­£æ˜¯ <strong>Concurrent Rendering å¹¶å‘æ¨¡å¼</strong> çš„æ ¸å¿ƒèƒ½åŠ›ï¼š ğŸ‘‰ â€œå¯ä¸­æ–­çš„æ¸²æŸ“ + æ™ºèƒ½è°ƒåº¦ä¼˜å…ˆçº§â€ã€‚</p><h2 id="å…«ã€ä¸é˜²æŠ–-debounce-çš„åŒºåˆ«" tabindex="-1">å…«ã€ä¸é˜²æŠ–ï¼ˆdebounceï¼‰çš„åŒºåˆ« <a class="header-anchor" href="#å…«ã€ä¸é˜²æŠ–-debounce-çš„åŒºåˆ«" aria-label="Permalink to &quot;å…«ã€ä¸é˜²æŠ–ï¼ˆdebounceï¼‰çš„åŒºåˆ«&quot;">â€‹</a></h2><table tabindex="0"><thead><tr><th>å¯¹æ¯”é¡¹</th><th>useDeferredValue</th><th>debounce</th></tr></thead><tbody><tr><td>åŸç†</td><td>React å†…éƒ¨è°ƒåº¦ä¼˜å…ˆçº§</td><td>å®šæ—¶å™¨å»¶è¿Ÿæ‰§è¡Œ</td></tr><tr><td>å“åº”é€Ÿåº¦</td><td>æ›´å¹³æ»‘ï¼ˆReact æ§åˆ¶ï¼‰</td><td>å›ºå®šå»¶è¿Ÿæ—¶é—´</td></tr><tr><td>æ¸²æŸ“ä¸€è‡´æ€§</td><td>ç”± React ä¿è¯</td><td>æ‰‹åŠ¨ç®¡ç†æ›´æ–°</td></tr><tr><td>SSR æ”¯æŒ</td><td>âœ…</td><td>âŒ</td></tr><tr><td>ç†æƒ³åœºæ™¯</td><td>UI æ¸²æŸ“ä¼˜åŒ–</td><td>API è¯·æ±‚èŠ‚æµ/é˜²æŠ–</td></tr></tbody></table><p>ğŸ‘‰ äºŒè€…ä¸æ˜¯æ›¿ä»£å…³ç³»ï¼Œå¯ä»¥<strong>é…åˆä½¿ç”¨</strong>ï¼š</p><ul><li>ç”¨ <code>debounce</code> é™ä½ API è¯·æ±‚é¢‘ç‡ï¼›</li><li>ç”¨ <code>useDeferredValue</code> è®© UI æ¸²æŸ“æ›´ä¸æ»‘ã€‚</li></ul><h2 id="ä¹ã€æœ€ä½³å®è·µ" tabindex="-1">ä¹ã€æœ€ä½³å®è·µ <a class="header-anchor" href="#ä¹ã€æœ€ä½³å®è·µ" aria-label="Permalink to &quot;ä¹ã€æœ€ä½³å®è·µ&quot;">â€‹</a></h2><table tabindex="0"><thead><tr><th>å»ºè®®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>âœ… å»¶è¿Ÿå€¼çš„ä½¿ç”¨è¦æ˜ç¡®</td><td>é€šå¸¸ç”¨äºè¾“å…¥å€¼ã€è¿‡æ»¤æ¡ä»¶</td></tr><tr><td>âœ… ä¸ <code>Suspense</code> / <code>useTransition</code> æ­é…æ›´ä½³</td><td>æå‡ UI ä½“éªŒ</td></tr><tr><td>âœ… ç”¨äºå¤§åˆ—è¡¨ã€å›¾è¡¨ã€å¤æ‚ DOM æ¸²æŸ“</td><td>æ˜¾è‘—ä¼˜åŒ–æ€§èƒ½</td></tr><tr><td>âŒ ä¸è¦å»¶è¿Ÿå…³é”®äº¤äº’çš„å€¼ï¼ˆå¦‚è¾“å…¥æ¡†æœ¬èº«çš„ valueï¼‰</td><td>å¦åˆ™ä¼šæ„Ÿè§‰â€œè¾“å…¥å»¶è¿Ÿâ€</td></tr><tr><td>âœ… å¯é€šè¿‡æ¯”è¾ƒåŸå§‹å€¼ä¸å»¶è¿Ÿå€¼æ˜¾ç¤ºâ€œåŠ è½½ä¸­â€</td><td><code>value !== deferredValue</code></td></tr></tbody></table>`,44))])}const F=n(r,[["render",d]]);export{b as __pageData,F as default};
