import{_ as n,C as l,c as e,o as t,j as a,G as p,a2 as h,a as r}from"./chunks/framework.DrNAj9nU.js";const k="/assets/fastapi-1.BgAASNMu.png",F=JSON.parse('{"title":"FastAPI è®²è§£ï¼šPython Web API çš„é¦–é€‰","description":"","frontmatter":{},"headers":[],"relativePath":"column/Python/è¿›é˜¶/Webæ¡†æ¶FastAPI.md","filePath":"column/Python/è¿›é˜¶/Webæ¡†æ¶FastAPI.md","lastUpdated":1769590824000}'),d={name:"column/Python/è¿›é˜¶/Webæ¡†æ¶FastAPI.md"};function o(c,s,E,g,u,b){const i=l("ArticleMetadata");return t(),e("div",null,[s[0]||(s[0]=a("h1",{id:"fastapi-è®²è§£-python-web-api-çš„é¦–é€‰",tabindex:"-1"},[r("FastAPI è®²è§£ï¼šPython Web API çš„é¦–é€‰ "),a("a",{class:"header-anchor",href:"#fastapi-è®²è§£-python-web-api-çš„é¦–é€‰","aria-label":'Permalink to "FastAPI è®²è§£ï¼šPython Web API çš„é¦–é€‰"'},"â€‹")],-1)),p(i),s[1]||(s[1]=h(`<nav class="table-of-contents"><ul><li><a href="#ä¸€ã€fastapi-æ˜¯ä»€ä¹ˆ">ä¸€ã€FastAPI æ˜¯ä»€ä¹ˆï¼Ÿ</a></li><li><a href="#äºŒã€ä¸ºä»€ä¹ˆ-fastapi-ä¼šç«">äºŒã€ä¸ºä»€ä¹ˆ FastAPI ä¼šç«ï¼Ÿ</a><ul><li><a href="#_2-1-æ€§èƒ½æ¥è¿‘-node-go">2.1 æ€§èƒ½æ¥è¿‘ Node / Go</a></li><li><a href="#_2-2-ç±»å‹å³æ–‡æ¡£-æ–‡æ¡£å³æ¥å£">2.2 ç±»å‹å³æ–‡æ¡£ï¼Œæ–‡æ¡£å³æ¥å£</a></li><li><a href="#_2-3-å†…ç½®-swagger-redoc">2.3 å†…ç½® Swagger / ReDoc</a></li></ul></li><li><a href="#ä¸‰ã€ä¸€ä¸ªæœ€å°-fastapi-åº”ç”¨">ä¸‰ã€ä¸€ä¸ªæœ€å° FastAPI åº”ç”¨</a><ul><li><a href="#_3-1-å®‰è£…">3.1 å®‰è£…</a></li><li><a href="#_3-2-åˆ›å»º-main-py">3.2 åˆ›å»º main.py</a></li><li><a href="#_3-3-å¯åŠ¨æœåŠ¡">3.3 å¯åŠ¨æœåŠ¡</a></li></ul></li><li><a href="#å››ã€è¯·æ±‚å‚æ•°è¯¦è§£">å››ã€è¯·æ±‚å‚æ•°è¯¦è§£</a><ul><li><a href="#_4-1-è·¯å¾„å‚æ•°">4.1 è·¯å¾„å‚æ•°</a></li><li><a href="#_4-2-query-å‚æ•°">4.2 Query å‚æ•°</a></li><li><a href="#_4-3-è¯·æ±‚ä½“-pydantic">4.3 è¯·æ±‚ä½“ï¼ˆPydanticï¼‰</a></li></ul></li><li><a href="#äº”ã€ä¾èµ–æ³¨å…¥-fastapi-çš„éšè—ç‹ç‰Œ">äº”ã€ä¾èµ–æ³¨å…¥ï¼ˆFastAPI çš„éšè—ç‹ç‰Œï¼‰</a></li><li><a href="#å…­ã€å¼‚æ­¥æ”¯æŒ-å¤©ç”Ÿä¸ºé«˜å¹¶å‘è€Œç”Ÿ">å…­ã€å¼‚æ­¥æ”¯æŒï¼šå¤©ç”Ÿä¸ºé«˜å¹¶å‘è€Œç”Ÿ</a></li><li><a href="#ä¸ƒã€é”™è¯¯å¤„ç†ä¸çŠ¶æ€ç ">ä¸ƒã€é”™è¯¯å¤„ç†ä¸çŠ¶æ€ç </a></li><li><a href="#å…«ã€ä¸­é—´ä»¶-cors">å…«ã€ä¸­é—´ä»¶ &amp; CORS</a></li><li><a href="#ä¹ã€fastapi-vs-flask-vs-django">ä¹ã€FastAPI vs Flask vs Django</a></li><li><a href="#åã€fastapi-é€‚åˆå“ªäº›åœºæ™¯">åã€FastAPI é€‚åˆå“ªäº›åœºæ™¯ï¼Ÿ</a></li></ul></nav><p>åœ¨ <code>Python Web</code> æ¡†æ¶çš„ä¸–ç•Œé‡Œï¼Œå¦‚æœä½ é—®ï¼š</p><blockquote><p>æœ‰æ²¡æœ‰ä¸€ä¸ª <strong>æ€§èƒ½å¥½ã€ç±»å‹å®‰å…¨ã€æ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆã€è¿˜å¾ˆå¥½å†™</strong> çš„æ¡†æ¶ï¼Ÿ</p></blockquote><p>ç­”æ¡ˆå¤§æ¦‚ç‡æ˜¯ <strong>FastAPI</strong>ã€‚</p><p>å®ƒä¸æ˜¯â€œåˆä¸€ä¸ª <code>Web</code> æ¡†æ¶â€ï¼Œè€Œæ˜¯æŠŠ <strong>ç°ä»£å·¥ç¨‹å®è·µ</strong> ç›´æ¥å¡è¿›äº† <code>Python Web</code> å¼€å‘é‡Œã€‚</p><h2 id="ä¸€ã€fastapi-æ˜¯ä»€ä¹ˆ" tabindex="-1">ä¸€ã€FastAPI æ˜¯ä»€ä¹ˆï¼Ÿ <a class="header-anchor" href="#ä¸€ã€fastapi-æ˜¯ä»€ä¹ˆ" aria-label="Permalink to &quot;ä¸€ã€FastAPI æ˜¯ä»€ä¹ˆï¼Ÿ&quot;">â€‹</a></h2><p><strong>FastAPI</strong> æ˜¯ä¸€ä¸ªç”¨äºæ„å»º API çš„ç°ä»£ <code>Python Web</code> æ¡†æ¶ï¼Œç‰¹ç‚¹åªæœ‰ä¸€å¥è¯ï¼š</p><blockquote><p><strong>å¿«ï¼ˆFastï¼‰ + ç±»å‹å®‰å…¨ï¼ˆType Hintsï¼‰ + è‡ªåŠ¨æ–‡æ¡£ï¼ˆOpenAPIï¼‰</strong></p></blockquote><p>å®ƒåŸºäºä¸‰å¤§æ ¸å¿ƒæŠ€æœ¯ï¼š</p><ul><li><strong>Starlette</strong>ï¼šé«˜æ€§èƒ½ ASGI Web æ¡†æ¶ï¼ˆè·¯ç”±ã€ä¸­é—´ä»¶ï¼‰</li><li><strong>Pydantic</strong>ï¼šæ•°æ®æ ¡éªŒ &amp; ç±»å‹ç³»ç»Ÿ</li><li><strong>Uvicorn</strong>ï¼šé«˜æ€§èƒ½å¼‚æ­¥æœåŠ¡å™¨</li></ul><h2 id="äºŒã€ä¸ºä»€ä¹ˆ-fastapi-ä¼šç«" tabindex="-1">äºŒã€ä¸ºä»€ä¹ˆ FastAPI ä¼šç«ï¼Ÿ <a class="header-anchor" href="#äºŒã€ä¸ºä»€ä¹ˆ-fastapi-ä¼šç«" aria-label="Permalink to &quot;äºŒã€ä¸ºä»€ä¹ˆ FastAPI ä¼šç«ï¼Ÿ&quot;">â€‹</a></h2><h3 id="_2-1-æ€§èƒ½æ¥è¿‘-node-go" tabindex="-1">2.1 æ€§èƒ½æ¥è¿‘ Node / Go <a class="header-anchor" href="#_2-1-æ€§èƒ½æ¥è¿‘-node-go" aria-label="Permalink to &quot;2.1 æ€§èƒ½æ¥è¿‘ Node / Go&quot;">â€‹</a></h3><p>FastAPI åŸºäº <strong>ASGI + async/await</strong>ï¼Œå®˜æ–¹ benchmark æ˜¾ç¤ºï¼š</p><ul><li>æ€§èƒ½ â‰ˆ Node.js</li><li>æ˜æ˜¾å¿«äº Flask / Djangoï¼ˆåŒæ­¥æ¨¡å¼ï¼‰</li></ul><p>é€‚åˆï¼š</p><ul><li>AI æœåŠ¡</li><li>é«˜å¹¶å‘ API</li><li>å¾®æœåŠ¡ç½‘å…³</li></ul><h3 id="_2-2-ç±»å‹å³æ–‡æ¡£-æ–‡æ¡£å³æ¥å£" tabindex="-1">2.2 ç±»å‹å³æ–‡æ¡£ï¼Œæ–‡æ¡£å³æ¥å£ <a class="header-anchor" href="#_2-2-ç±»å‹å³æ–‡æ¡£-æ–‡æ¡£å³æ¥å£" aria-label="Permalink to &quot;2.2 ç±»å‹å³æ–‡æ¡£ï¼Œæ–‡æ¡£å³æ¥å£&quot;">â€‹</a></h3><p>è¿™æ˜¯ FastAPI <strong>æœ€æ€æ‰‹çº§çš„è®¾è®¡</strong>ã€‚</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fastapi </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> FastAPI</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> FastAPI()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@app.get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/users/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{user_id}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> get_user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(user_id: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: user_id}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>ä½ å¾—åˆ°äº†ä»€ä¹ˆï¼Ÿ</p><ul><li><code>user_id</code> è‡ªåŠ¨æ ¡éªŒä¸º <code>int</code></li><li>é”™è¯¯è‡ªåŠ¨è¿”å› 422</li><li>Swagger æ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆ</li><li>OpenAPI Schema è‡ªåŠ¨è¾“å‡º</li></ul><p>ğŸ‘‰ <strong>å†™ä»£ç  = å†™æ¥å£æ–‡æ¡£</strong></p><h3 id="_2-3-å†…ç½®-swagger-redoc" tabindex="-1">2.3 å†…ç½® Swagger / ReDoc <a class="header-anchor" href="#_2-3-å†…ç½®-swagger-redoc" aria-label="Permalink to &quot;2.3 å†…ç½® Swagger / ReDoc&quot;">â€‹</a></h3><p>å¯åŠ¨åç›´æ¥è®¿é—®ï¼š</p><ul><li>Swagger UI ğŸ‘‰ <a href="http://127.0.0.1:8000/docs" target="_blank" rel="noreferrer">http://127.0.0.1:8000/docs</a></li></ul><p><img src="`+k+`" alt="" loading="lazy"></p><p>å‰ç«¯åŒå­¦çœ‹åˆ°ä¼šç›´æ¥çˆ±ä¸Š ğŸ˜„</p><h2 id="ä¸‰ã€ä¸€ä¸ªæœ€å°-fastapi-åº”ç”¨" tabindex="-1">ä¸‰ã€ä¸€ä¸ªæœ€å° FastAPI åº”ç”¨ <a class="header-anchor" href="#ä¸‰ã€ä¸€ä¸ªæœ€å°-fastapi-åº”ç”¨" aria-label="Permalink to &quot;ä¸‰ã€ä¸€ä¸ªæœ€å° FastAPI åº”ç”¨&quot;">â€‹</a></h2><h3 id="_3-1-å®‰è£…" tabindex="-1">3.1 å®‰è£… <a class="header-anchor" href="#_3-1-å®‰è£…" aria-label="Permalink to &quot;3.1 å®‰è£…&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fastapi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> uvicorn</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_3-2-åˆ›å»º-main-py" tabindex="-1">3.2 åˆ›å»º <code>main.py</code> <a class="header-anchor" href="#_3-2-åˆ›å»º-main-py" aria-label="Permalink to &quot;3.2 åˆ›å»º \`main.py\`&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fastapi </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> FastAPI</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> FastAPI()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@app.get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> read_root</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">():</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;hello&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;world&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_3-3-å¯åŠ¨æœåŠ¡" tabindex="-1">3.3 å¯åŠ¨æœåŠ¡ <a class="header-anchor" href="#_3-3-å¯åŠ¨æœåŠ¡" aria-label="Permalink to &quot;3.3 å¯åŠ¨æœåŠ¡&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">uvicorn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> main:app</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --reload</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><code>main</code>ï¼šæ–‡ä»¶å</li><li><code>app</code>ï¼šFastAPI å®ä¾‹</li><li><code>--reload</code>ï¼šçƒ­æ›´æ–°ï¼ˆå¼€å‘å¿…å¼€ï¼‰</li></ul><h2 id="å››ã€è¯·æ±‚å‚æ•°è¯¦è§£" tabindex="-1">å››ã€è¯·æ±‚å‚æ•°è¯¦è§£ <a class="header-anchor" href="#å››ã€è¯·æ±‚å‚æ•°è¯¦è§£" aria-label="Permalink to &quot;å››ã€è¯·æ±‚å‚æ•°è¯¦è§£&quot;">â€‹</a></h2><h3 id="_4-1-è·¯å¾„å‚æ•°" tabindex="-1">4.1 è·¯å¾„å‚æ•° <a class="header-anchor" href="#_4-1-è·¯å¾„å‚æ•°" aria-label="Permalink to &quot;4.1 è·¯å¾„å‚æ•°&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@app.get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/items/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{item_id}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> read_item</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(item_id: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;item_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: item_id}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>è‡ªåŠ¨æ ¡éªŒï¼š</p><ul><li><code>/items/abc</code> âŒ</li><li><code>/items/123</code> âœ…</li></ul><h3 id="_4-2-query-å‚æ•°" tabindex="-1">4.2 Query å‚æ•° <a class="header-anchor" href="#_4-2-query-å‚æ•°" aria-label="Permalink to &quot;4.2 Query å‚æ•°&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@app.get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/items&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> list_items</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(page: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, size: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;page&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: page, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;size&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: size}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>è®¿é—®ï¼š</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>/items?page=2&amp;size=20</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_4-3-è¯·æ±‚ä½“-pydantic" tabindex="-1">4.3 è¯·æ±‚ä½“ï¼ˆPydanticï¼‰ <a class="header-anchor" href="#_4-3-è¯·æ±‚ä½“-pydantic" aria-label="Permalink to &quot;4.3 è¯·æ±‚ä½“ï¼ˆPydanticï¼‰&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pydantic </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BaseModel</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BaseModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    name: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    age: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    email: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> None</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> None</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@app.post</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> create_user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(user: User):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> user</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>è‡ªåŠ¨è·å¾—ï¼š</strong></p><ul><li>JSON æ ¡éªŒ</li><li>å­—æ®µæç¤º</li><li>é”™è¯¯ä¿¡æ¯</li><li>Swagger è¡¨å•</li></ul><h2 id="äº”ã€ä¾èµ–æ³¨å…¥-fastapi-çš„éšè—ç‹ç‰Œ" tabindex="-1">äº”ã€ä¾èµ–æ³¨å…¥ï¼ˆFastAPI çš„éšè—ç‹ç‰Œï¼‰ <a class="header-anchor" href="#äº”ã€ä¾èµ–æ³¨å…¥-fastapi-çš„éšè—ç‹ç‰Œ" aria-label="Permalink to &quot;äº”ã€ä¾èµ–æ³¨å…¥ï¼ˆFastAPI çš„éšè—ç‹ç‰Œï¼‰&quot;">â€‹</a></h2><p>FastAPI çš„ <strong>Depends</strong> éå¸¸å¼ºå¤§ã€‚</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fastapi </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Depends</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> get_token</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">():</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;token123&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@app.get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/profile&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> profile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(token: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Depends(get_token)):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;token&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: token}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>å¯ä»¥ç”¨æ¥åšï¼š</strong></p><ul><li>ç™»å½•é‰´æƒ</li><li>æ•°æ®åº“è¿æ¥</li><li>æƒé™æ ¡éªŒ</li><li>è¯·æ±‚çº§ç¼“å­˜</li></ul><p>ğŸ‘‰ æ¯” Spring è½»ï¼Œæ¯” Flask è§„èŒƒã€‚</p><h2 id="å…­ã€å¼‚æ­¥æ”¯æŒ-å¤©ç”Ÿä¸ºé«˜å¹¶å‘è€Œç”Ÿ" tabindex="-1">å…­ã€å¼‚æ­¥æ”¯æŒï¼šå¤©ç”Ÿä¸ºé«˜å¹¶å‘è€Œç”Ÿ <a class="header-anchor" href="#å…­ã€å¼‚æ­¥æ”¯æŒ-å¤©ç”Ÿä¸ºé«˜å¹¶å‘è€Œç”Ÿ" aria-label="Permalink to &quot;å…­ã€å¼‚æ­¥æ”¯æŒï¼šå¤©ç”Ÿä¸ºé«˜å¹¶å‘è€Œç”Ÿ&quot;">â€‹</a></h2><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@app.get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/async&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> async_api</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">():</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> asyncio.sleep(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;msg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;done&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ä»€ä¹ˆæ—¶å€™ç”¨ <code>async</code>ï¼Ÿ</p><ul><li>IO å¯†é›†å‹ï¼ˆDB / HTTP / Redisï¼‰</li><li>ä¸é€‚åˆ CPU å¯†é›†å‹ï¼ˆé‚£å¾—ç”¨å¤šè¿›ç¨‹ï¼‰</li></ul><h2 id="ä¸ƒã€é”™è¯¯å¤„ç†ä¸çŠ¶æ€ç " tabindex="-1">ä¸ƒã€é”™è¯¯å¤„ç†ä¸çŠ¶æ€ç  <a class="header-anchor" href="#ä¸ƒã€é”™è¯¯å¤„ç†ä¸çŠ¶æ€ç " aria-label="Permalink to &quot;ä¸ƒã€é”™è¯¯å¤„ç†ä¸çŠ¶æ€ç &quot;">â€‹</a></h2><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fastapi </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> HTTPException</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@app.get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/users/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{id}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> get_user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(id: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        raise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> HTTPException(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">status_code</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">404</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">detail</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;User not found&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>è¿”å›æ ¼å¼ç»Ÿä¸€ã€å‰ç«¯å‹å¥½ã€‚</p><h2 id="å…«ã€ä¸­é—´ä»¶-cors" tabindex="-1">å…«ã€ä¸­é—´ä»¶ &amp; CORS <a class="header-anchor" href="#å…«ã€ä¸­é—´ä»¶-cors" aria-label="Permalink to &quot;å…«ã€ä¸­é—´ä»¶ &amp; CORS&quot;">â€‹</a></h2><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fastapi.middleware.cors </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CORSMiddleware</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app.add_middleware(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    CORSMiddleware,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    allow_origins</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    allow_methods</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    allow_headers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>å‰åç«¯åˆ†ç¦»å¿…å¤‡ã€‚</p><h2 id="ä¹ã€fastapi-vs-flask-vs-django" tabindex="-1">ä¹ã€FastAPI vs Flask vs Django <a class="header-anchor" href="#ä¹ã€fastapi-vs-flask-vs-django" aria-label="Permalink to &quot;ä¹ã€FastAPI vs Flask vs Django&quot;">â€‹</a></h2><table tabindex="0"><thead><tr><th>ç»´åº¦</th><th>FastAPI</th><th>Flask</th><th>Django</th></tr></thead><tbody><tr><td>æ€§èƒ½</td><td>â­â­â­â­</td><td>â­â­</td><td>â­â­</td></tr><tr><td>ç±»å‹å®‰å…¨</td><td>âœ…</td><td>âŒ</td><td>âŒ</td></tr><tr><td>è‡ªåŠ¨æ–‡æ¡£</td><td>âœ…</td><td>âŒ</td><td>âŒ</td></tr><tr><td>å­¦ä¹ æˆæœ¬</td><td>ä¸­</td><td>ä½</td><td>é«˜</td></tr><tr><td>å·¥ç¨‹åŒ–</td><td>â­â­â­â­</td><td>â­â­</td><td>â­â­â­â­</td></tr></tbody></table><p>ğŸ‘‰ <strong>ç»“è®º</strong>ï¼š</p><ul><li>å°å·¥å…· â†’ Flask</li><li>ä¼ ç»Ÿåå° â†’ Django</li><li>ç°ä»£ API / AI æœåŠ¡ â†’ <strong>FastAPI</strong></li></ul><h2 id="åã€fastapi-é€‚åˆå“ªäº›åœºæ™¯" tabindex="-1">åã€FastAPI é€‚åˆå“ªäº›åœºæ™¯ï¼Ÿ <a class="header-anchor" href="#åã€fastapi-é€‚åˆå“ªäº›åœºæ™¯" aria-label="Permalink to &quot;åã€FastAPI é€‚åˆå“ªäº›åœºæ™¯ï¼Ÿ&quot;">â€‹</a></h2><ul><li>AI / LLM æ¨ç†æ¥å£</li><li>å‰åç«¯åˆ†ç¦» API</li><li>å¾®æœåŠ¡</li><li>BFFï¼ˆBackend For Frontendï¼‰</li><li>å†…éƒ¨å·¥å…· &amp; ä¸­å°</li></ul><p>å¦‚æœä½ åšçš„æ˜¯ <strong>Next.js + API + AI</strong>ï¼ŒFastAPI éå¸¸æ­ã€‚</p><p><strong>ä¸€ä¸ªæ¨èçš„å·¥ç¨‹ç»“æ„</strong></p><div class="language-text vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>app/</span></span>
<span class="line"><span>â”œâ”€â”€ main.py</span></span>
<span class="line"><span>â”œâ”€â”€ routers/</span></span>
<span class="line"><span>â”‚   â””â”€â”€ user.py</span></span>
<span class="line"><span>â”œâ”€â”€ models/</span></span>
<span class="line"><span>â”‚   â””â”€â”€ user.py</span></span>
<span class="line"><span>â”œâ”€â”€ services/</span></span>
<span class="line"><span>â”‚   â””â”€â”€ user_service.py</span></span>
<span class="line"><span>â””â”€â”€ core/</span></span>
<span class="line"><span>    â””â”€â”€ config.py</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div>`,73))])}const m=n(d,[["render",o]]);export{F as __pageData,m as default};
