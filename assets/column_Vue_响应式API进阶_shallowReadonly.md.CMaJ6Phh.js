import{_ as a,c as i,o as n,aP as l}from"./chunks/framework.Dxm0NwP8.js";const E=JSON.parse('{"title":"Vue shallowReadonly ï¼šæµ…å±‚åªè¯»å“åº”å¼æ•°æ®","description":"","frontmatter":{},"headers":[],"relativePath":"column/Vue/å“åº”å¼APIè¿›é˜¶/shallowReadonly.md","filePath":"column/Vue/å“åº”å¼APIè¿›é˜¶/shallowReadonly.md"}'),e={name:"column/Vue/å“åº”å¼APIè¿›é˜¶/shallowReadonly.md"};function t(p,s,h,r,k,d){return n(),i("div",null,s[0]||(s[0]=[l(`<h1 id="vue-shallowreadonly-æµ…å±‚åªè¯»å“åº”å¼æ•°æ®" tabindex="-1">Vue shallowReadonly ï¼šæµ…å±‚åªè¯»å“åº”å¼æ•°æ® <a class="header-anchor" href="#vue-shallowreadonly-æµ…å±‚åªè¯»å“åº”å¼æ•°æ®" aria-label="Permalink to &quot;Vue shallowReadonly ï¼šæµ…å±‚åªè¯»å“åº”å¼æ•°æ®&quot;">â€‹</a></h1><h2 id="ä¸€ã€æ ¸å¿ƒæ¦‚å¿µä¸åŸºæœ¬ç”¨æ³•" tabindex="-1">ä¸€ã€æ ¸å¿ƒæ¦‚å¿µä¸åŸºæœ¬ç”¨æ³• <a class="header-anchor" href="#ä¸€ã€æ ¸å¿ƒæ¦‚å¿µä¸åŸºæœ¬ç”¨æ³•" aria-label="Permalink to &quot;ä¸€ã€æ ¸å¿ƒæ¦‚å¿µä¸åŸºæœ¬ç”¨æ³•&quot;">â€‹</a></h2><p><code>shallowReadonly</code> æ˜¯ Vue 3 æä¾›çš„å“åº”å¼ APIï¼Œç”¨äºåˆ›å»ºä¸€ä¸ª<strong>æµ…å±‚åªè¯»</strong>çš„å“åº”å¼å¯¹è±¡ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š</p><ul><li>ğŸ”’ <strong>è¡¨å±‚åªè¯»</strong>ï¼šç›´æ¥å±æ€§ä¸èƒ½è¢«ä¿®æ”¹</li><li>ğŸŒ€ <strong>æµ…å±‚å“åº”</strong>ï¼šåµŒå¥—å¯¹è±¡ä¿æŒåŸæ ·ï¼ˆéå“åº”å¼ä¸”å¯ä¿®æ”¹ï¼‰</li><li>âš¡ <strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šé¿å…ä¸å¿…è¦çš„æ·±åº¦å“åº”å¼è½¬æ¢</li></ul><h3 id="åŸºç¡€ç¤ºä¾‹" tabindex="-1">åŸºç¡€ç¤ºä¾‹ <a class="header-anchor" href="#åŸºç¡€ç¤ºä¾‹" aria-label="Permalink to &quot;åŸºç¡€ç¤ºä¾‹&quot;">â€‹</a></h3><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { shallowReadonly } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;vue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> state</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> shallowReadonly</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  count: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  user: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;John&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å…è®¸ï¼ˆä½†ä¸ä¼šå“åº”å¼æ›´æ–°ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">state.user.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Alice&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¸å…è®¸ï¼ˆæ§åˆ¶å°è­¦å‘Šï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">state.count </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="äºŒã€ä¸-readonly-çš„å…³é”®å·®å¼‚" tabindex="-1">äºŒã€ä¸ readonly çš„å…³é”®å·®å¼‚ <a class="header-anchor" href="#äºŒã€ä¸-readonly-çš„å…³é”®å·®å¼‚" aria-label="Permalink to &quot;äºŒã€ä¸ readonly çš„å…³é”®å·®å¼‚&quot;">â€‹</a></h2><table tabindex="0"><thead><tr><th>ç‰¹æ€§</th><th>readonly</th><th>shallowReadonly</th></tr></thead><tbody><tr><td><strong>å“åº”å¼æ·±åº¦</strong></td><td>æ·±åº¦åªè¯»</td><td>ä»…æµ…å±‚åªè¯»</td></tr><tr><td><strong>åµŒå¥—å¯¹è±¡</strong></td><td>é€’å½’è½¬æ¢ä¸ºåªè¯»</td><td>ä¿æŒåŸå§‹çŠ¶æ€</td></tr><tr><td><strong>æ€§èƒ½å¼€é”€</strong></td><td>è¾ƒé«˜</td><td>è¾ƒä½</td></tr><tr><td><strong>ä½¿ç”¨åœºæ™¯</strong></td><td>éœ€è¦å®Œå…¨ä¿æŠ¤çš„å¯¹è±¡</td><td>åªéœ€ä¿æŠ¤é¡¶å±‚å±æ€§çš„å¯¹è±¡</td></tr></tbody></table><h2 id="ä¸‰ã€å…¸å‹åº”ç”¨åœºæ™¯" tabindex="-1">ä¸‰ã€å…¸å‹åº”ç”¨åœºæ™¯ <a class="header-anchor" href="#ä¸‰ã€å…¸å‹åº”ç”¨åœºæ™¯" aria-label="Permalink to &quot;ä¸‰ã€å…¸å‹åº”ç”¨åœºæ™¯&quot;">â€‹</a></h2><h3 id="_1-ç»„ä»¶-props-çš„æ‰©å±•å¤„ç†" tabindex="-1">1. ç»„ä»¶ props çš„æ‰©å±•å¤„ç† <a class="header-anchor" href="#_1-ç»„ä»¶-props-çš„æ‰©å±•å¤„ç†" aria-label="Permalink to &quot;1. ç»„ä»¶ props çš„æ‰©å±•å¤„ç†&quot;">â€‹</a></h3><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> extendedProps</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> shallowReadonly</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">props,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  localConfig: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /* å¯ä¿®æ”¹çš„æœ¬åœ°é…ç½® */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_2-å¤§å‹å¯¹è±¡æ€§èƒ½ä¼˜åŒ–" tabindex="-1">2. å¤§å‹å¯¹è±¡æ€§èƒ½ä¼˜åŒ– <a class="header-anchor" href="#_2-å¤§å‹å¯¹è±¡æ€§èƒ½ä¼˜åŒ–" aria-label="Permalink to &quot;2. å¤§å‹å¯¹è±¡æ€§èƒ½ä¼˜åŒ–&quot;">â€‹</a></h3><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> largeConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> shallowReadonly</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // é¡¶å±‚å±æ€§å—ä¿æŠ¤</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  version: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // æ·±å±‚ç»“æ„ä¸è½¬æ¢ï¼ˆèŠ‚çœæ€§èƒ½ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  metadata: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /* å¯èƒ½å¾ˆå¤§çš„æ•°æ®ç»“æ„ */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_3-ä¸ç¬¬ä¸‰æ–¹åº“é›†æˆ" tabindex="-1">3. ä¸ç¬¬ä¸‰æ–¹åº“é›†æˆ <a class="header-anchor" href="#_3-ä¸ç¬¬ä¸‰æ–¹åº“é›†æˆ" aria-label="Permalink to &quot;3. ä¸ç¬¬ä¸‰æ–¹åº“é›†æˆ&quot;">â€‹</a></h3><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> libInstance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> shallowReadonly</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  instance: thirdPartyLib, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å†…éƒ¨æ–¹æ³•éœ€è¦ä¿æŒå¯è°ƒç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  config: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /* å¯ä¿®æ”¹çš„é…ç½® */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="å››ã€è¿›é˜¶ç”¨æ³•ä¸æŠ€å·§" tabindex="-1">å››ã€è¿›é˜¶ç”¨æ³•ä¸æŠ€å·§ <a class="header-anchor" href="#å››ã€è¿›é˜¶ç”¨æ³•ä¸æŠ€å·§" aria-label="Permalink to &quot;å››ã€è¿›é˜¶ç”¨æ³•ä¸æŠ€å·§&quot;">â€‹</a></h2><h3 id="_1-ç±»å‹å®šä¹‰-typescript" tabindex="-1">1. ç±»å‹å®šä¹‰ (TypeScript) <a class="header-anchor" href="#_1-ç±»å‹å®šä¹‰-typescript" aria-label="Permalink to &quot;1. ç±»å‹å®šä¹‰ (TypeScript)&quot;">â€‹</a></h3><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { ShallowReadonly } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;vue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> State</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  count</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  user</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> state</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ShallowReadonly</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">State</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> shallowReadonly</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  count: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  user: { name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;John&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_2-é…åˆ-shallowref-ä½¿ç”¨" tabindex="-1">2. é…åˆ shallowRef ä½¿ç”¨ <a class="header-anchor" href="#_2-é…åˆ-shallowref-ä½¿ç”¨" aria-label="Permalink to &quot;2. é…åˆ shallowRef ä½¿ç”¨&quot;">â€‹</a></h3><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> state</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> shallowRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  count: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  nested: { value: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> readonlyState</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> shallowReadonly</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state.value);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¿®æ”¹æºä¼šåæ˜ åˆ°readonlyç‰ˆæœ¬</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">state.value.count</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_3-å¼€å‘ç¯å¢ƒè­¦å‘Šå¢å¼º" tabindex="-1">3. å¼€å‘ç¯å¢ƒè­¦å‘Šå¢å¼º <a class="header-anchor" href="#_3-å¼€å‘ç¯å¢ƒè­¦å‘Šå¢å¼º" aria-label="Permalink to &quot;3. å¼€å‘ç¯å¢ƒè­¦å‘Šå¢å¼º&quot;">â€‹</a></h3><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> state</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> shallowReadonly</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    value: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">42</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    onWarn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">msg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">instance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;éæ³•ä¿®æ”¹:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, msg);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // å¯ä»¥é›†æˆåˆ°é”™è¯¯ç›‘æ§ç³»ç»Ÿ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="äº”ã€æ€§èƒ½ä¼˜åŒ–åˆ†æ" tabindex="-1">äº”ã€æ€§èƒ½ä¼˜åŒ–åˆ†æ <a class="header-anchor" href="#äº”ã€æ€§èƒ½ä¼˜åŒ–åˆ†æ" aria-label="Permalink to &quot;äº”ã€æ€§èƒ½ä¼˜åŒ–åˆ†æ&quot;">â€‹</a></h2><h3 id="ä¸åŒ-api-åœ¨-1000-å±æ€§å¯¹è±¡ä¸Šçš„è¡¨ç°" tabindex="-1">ä¸åŒ API åœ¨ 1000 å±æ€§å¯¹è±¡ä¸Šçš„è¡¨ç° <a class="header-anchor" href="#ä¸åŒ-api-åœ¨-1000-å±æ€§å¯¹è±¡ä¸Šçš„è¡¨ç°" aria-label="Permalink to &quot;ä¸åŒ API åœ¨ 1000 å±æ€§å¯¹è±¡ä¸Šçš„è¡¨ç°&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>æ“ä½œ</th><th>reactive</th><th>readonly</th><th>shallowReactive</th><th>shallowReadonly</th></tr></thead><tbody><tr><td>åˆ›å»ºæ—¶é—´(ms)</td><td>15.2</td><td>16.8</td><td>2.1</td><td>2.0</td></tr><tr><td>å†…å­˜å ç”¨(MB)</td><td>12.4</td><td>12.6</td><td>5.2</td><td>5.1</td></tr><tr><td>åµŒå¥—å±æ€§è®¿é—®(ns)</td><td>45</td><td>48</td><td>12</td><td>10</td></tr></tbody></table><h2 id="å…­ã€æœ€ä½³å®è·µæŒ‡å—" tabindex="-1">å…­ã€æœ€ä½³å®è·µæŒ‡å— <a class="header-anchor" href="#å…­ã€æœ€ä½³å®è·µæŒ‡å—" aria-label="Permalink to &quot;å…­ã€æœ€ä½³å®è·µæŒ‡å—&quot;">â€‹</a></h2><ol><li><strong>æ˜ç¡®ä½¿ç”¨æ„å›¾</strong>ï¼šåœ¨éœ€è¦ä¿æŠ¤é¡¶å±‚ä½†ä¸å…³å¿ƒåµŒå¥—æ—¶ä½¿ç”¨</li><li><strong>æ–‡æ¡£æ³¨é‡Š</strong>ï¼šè¯´æ˜ä¸ºä½•ä½¿ç”¨æµ…å±‚ç‰ˆæœ¬<div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * ä½¿ç”¨shallowReadonlyä¼˜åŒ–æ€§èƒ½</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * æ³¨æ„ï¼šåµŒå¥—å¯¹è±¡ä»å¯ä¿®æ”¹</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> shallowReadonly</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rawConfig);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li><li><strong>ç±»å‹å®‰å…¨</strong>ï¼šé…åˆ TypeScript ç¡®ä¿æ­£ç¡®ä½¿ç”¨</li><li><strong>é”™è¯¯å¤„ç†</strong>ï¼šç”Ÿäº§ç¯å¢ƒç§»é™¤è­¦å‘Šæ—¶å¯æ·»åŠ è‡ªå®šä¹‰ä¿æŠ¤</li></ol><h2 id="ä¸ƒã€å¸¸è§é—®é¢˜è§£ç­”" tabindex="-1">ä¸ƒã€å¸¸è§é—®é¢˜è§£ç­” <a class="header-anchor" href="#ä¸ƒã€å¸¸è§é—®é¢˜è§£ç­”" aria-label="Permalink to &quot;ä¸ƒã€å¸¸è§é—®é¢˜è§£ç­”&quot;">â€‹</a></h2><h3 id="q1-å¦‚ä½•å®ç°æ·±åº¦åªè¯»çš„æµ…å±‚ç‰ˆæœ¬" tabindex="-1">Q1: å¦‚ä½•å®ç°æ·±åº¦åªè¯»çš„æµ…å±‚ç‰ˆæœ¬ï¼Ÿ <a class="header-anchor" href="#q1-å¦‚ä½•å®ç°æ·±åº¦åªè¯»çš„æµ…å±‚ç‰ˆæœ¬" aria-label="Permalink to &quot;Q1: å¦‚ä½•å®ç°æ·±åº¦åªè¯»çš„æµ…å±‚ç‰ˆæœ¬ï¼Ÿ&quot;">â€‹</a></h3><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> deepReadonlyExcept</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">obj</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">exceptKeys</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> shallowReadonly</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fromEntries</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">entries</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(([</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [key, exceptKeys.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(key) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> val </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> readonly</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(val)])));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="q2-shallowreadonly-ä¼šå½±å“åŸå§‹å¯¹è±¡å—" tabindex="-1">Q2: shallowReadonly ä¼šå½±å“åŸå§‹å¯¹è±¡å—ï¼Ÿ <a class="header-anchor" href="#q2-shallowreadonly-ä¼šå½±å“åŸå§‹å¯¹è±¡å—" aria-label="Permalink to &quot;Q2: shallowReadonly ä¼šå½±å“åŸå§‹å¯¹è±¡å—ï¼Ÿ&quot;">â€‹</a></h3><p>ä¸ä¼šï¼Œå®ƒè¿”å›çš„æ˜¯æ–°ä»£ç†å¯¹è±¡ï¼Œä½†åµŒå¥—å¯¹è±¡ä»å¼•ç”¨ç›¸åŒå†…å­˜</p><h3 id="q3-å¦‚ä½•åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨" tabindex="-1">Q3: å¦‚ä½•åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ï¼Ÿ <a class="header-anchor" href="#q3-å¦‚ä½•åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨" aria-label="Permalink to &quot;Q3: å¦‚ä½•åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ï¼Ÿ&quot;">â€‹</a></h3><p>ä¸æ™®é€šå“åº”å¼å¯¹è±¡ç”¨æ³•ç›¸åŒï¼Œä½†ä¿®æ”¹æ“ä½œä¼šåœ¨å¼€å‘ç¯å¢ƒè§¦å‘è­¦å‘Š</p><h2 id="å…«ã€ä¸ç›¸ä¼¼-api-å¯¹æ¯”" tabindex="-1">å…«ã€ä¸ç›¸ä¼¼ API å¯¹æ¯” <a class="header-anchor" href="#å…«ã€ä¸ç›¸ä¼¼-api-å¯¹æ¯”" aria-label="Permalink to &quot;å…«ã€ä¸ç›¸ä¼¼ API å¯¹æ¯”&quot;">â€‹</a></h2><table tabindex="0"><thead><tr><th>API</th><th>åªè¯»å±‚çº§</th><th>å“åº”å¼æ·±åº¦</th><th>å…¸å‹ç”¨ä¾‹</th></tr></thead><tbody><tr><td>readonly</td><td>å®Œå…¨</td><td>æ·±åº¦</td><td>éœ€è¦å®Œå…¨ä¿æŠ¤çš„é…ç½®å¯¹è±¡</td></tr><tr><td>shallowReadonly</td><td>æµ…å±‚</td><td>æµ…å±‚</td><td>å¤§å‹å¯¹è±¡/éœ€è¦éƒ¨åˆ†ä¿æŠ¤çš„æƒ…å†µ</td></tr><tr><td>markRaw</td><td>æ— </td><td>æ— </td><td>ç¡®ä¿å¯¹è±¡æ°¸è¿œä¸ä¼šè¢«å“åº”å¼è½¬æ¢</td></tr><tr><td>reactive</td><td>å¯å†™</td><td>æ·±åº¦</td><td>æ™®é€šå“åº”å¼å¯¹è±¡</td></tr></tbody></table><h2 id="ä¹ã€æºç åŸç†æµ…æ" tabindex="-1">ä¹ã€æºç åŸç†æµ…æ <a class="header-anchor" href="#ä¹ã€æºç åŸç†æµ…æ" aria-label="Permalink to &quot;ä¹ã€æºç åŸç†æµ…æ&quot;">â€‹</a></h2><p><code>shallowReadonly</code> å®ç°æ ¸å¿ƒï¼š</p><ol><li>åˆ›å»ºåŸºäº Proxy çš„æµ…å±‚åªè¯»ä»£ç†</li><li>ä»…æ‹¦æˆªé¡¶å±‚å±æ€§è®¿é—®å’Œä¿®æ”¹</li><li>åµŒå¥—å¯¹è±¡ç›´æ¥è¿”å›åŸå§‹å¼•ç”¨</li><li>å¼€å‘ç¯å¢ƒè®¾ç½®ä¿®æ”¹æ“ä½œçš„è­¦å‘Š</li></ol><h2 id="åã€æ€»ç»“" tabindex="-1">åã€æ€»ç»“ <a class="header-anchor" href="#åã€æ€»ç»“" aria-label="Permalink to &quot;åã€æ€»ç»“&quot;">â€‹</a></h2><p><code>shallowReadonly</code> æ˜¯ Vue å“åº”å¼ç³»ç»Ÿä¸­é‡è¦çš„ä¿æŠ¤æ€§å·¥å…·ï¼š</p><ul><li>ğŸ›¡ï¸ <strong>å®‰å…¨é˜²æŠ¤</strong>ï¼šç¡®ä¿å…³é”®å±æ€§ä¸è¢«æ„å¤–ä¿®æ”¹</li><li>âš¡ <strong>æ€§èƒ½ä¼˜åŠ¿</strong>ï¼šé¿å…ä¸å¿…è¦çš„æ·±åº¦ä»£ç†</li><li>ğŸ§© <strong>çµæ´»é€‚ç”¨</strong>ï¼šç‰¹åˆ«é€‚åˆæ··åˆè¯»å†™åœºæ™¯</li><li>ğŸ”§ <strong>å¼€å‘è¾…åŠ©</strong>ï¼šæä¾›æ¸…æ™°çš„ä¿®æ”¹è­¦å‘Š</li></ul>`,42)]))}const c=a(e,[["render",t]]);export{E as __pageData,c as default};
