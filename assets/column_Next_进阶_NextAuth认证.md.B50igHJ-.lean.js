import{_ as r,C as i,c as E,o as a,j as n,G as l,aQ as p,b as d,a as h,w as t,aS as g}from"./chunks/framework.DEi4YP2n.js";const y="/assets/next-auth-1.8KtLRSRy.png",F="/assets/next-auth-4.CJeE5og-.png",o="/assets/next-auth-2.WRxmCtYF.png",c="/assets/next-auth-5.BtUEmVXd.png",u="/assets/next-auth-3.Cmu_V7nS.png",v=JSON.parse('{"title":"Next.js 15 + MySQL + NextAuth.js 基于 Cookie/Session 鉴权实战","description":"","frontmatter":{},"headers":[],"relativePath":"column/Next/进阶/NextAuth认证.md","filePath":"column/Next/进阶/NextAuth认证.md","lastUpdated":1762497968000}'),b={name:"column/Next/进阶/NextAuth认证.md"};function A(m,s,C,D,B,q){const k=i("ArticleMetadata"),e=i("Mermaid");return a(),E("div",null,[s[1]||(s[1]=n("h1",{id:"next-js-15-mysql-nextauth-js-基于-cookie-session-鉴权实战",tabindex:"-1"},[h("Next.js 15 + MySQL + NextAuth.js 基于 Cookie/Session 鉴权实战 "),n("a",{class:"header-anchor",href:"#next-js-15-mysql-nextauth-js-基于-cookie-session-鉴权实战","aria-label":'Permalink to "Next.js 15 + MySQL + NextAuth.js 基于 Cookie/Session 鉴权实战"'},"​")],-1)),l(k),s[2]||(s[2]=p("",51)),(a(),d(g,null,{default:t(()=>[l(e,{id:"mermaid-169",class:"mermaid",graph:"sequenceDiagram%0A%20%20%20%20participant%20U%20as%20%E7%94%A8%E6%88%B7(%E6%B5%8F%E8%A7%88%E5%99%A8)%0A%20%20%20%20participant%20FE%20as%20%E5%89%8D%E7%AB%AF%E9%A1%B5%E9%9D%A2(app%2F)%0A%20%20%20%20participant%20API%20as%20NextAuth%20API%3Cbr%2F%3E%2Fapi%2Fauth%2F%5B...nextauth%5D%0A%20%20%20%20participant%20DB%20as%20MySQL%20%E6%95%B0%E6%8D%AE%E5%BA%93%0A%20%20%20%20participant%20S%20as%20Session%20Cookie%3Cbr%2F%3E(next-auth.session-token)%0A%0A%20%20%20%20Note%20over%20U%2CFE%3A%201%EF%B8%8F%E2%83%A3%20%E7%94%A8%E6%88%B7%E6%8F%90%E4%BA%A4%E7%99%BB%E5%BD%95%E8%A1%A8%E5%8D%95%0A%20%20%20%20U-%3E%3EFE%3A%20%E8%BE%93%E5%85%A5%20Email%20%2B%20Password%0A%20%20%20%20FE-%3E%3EAPI%3A%20POST%20%2Fapi%2Fauth%2Fcallback%2Fcredentials%3Cbr%2F%3E%7B%20email%2C%20password%20%7D%0A%0A%20%20%20%20Note%20over%20API%2CDB%3A%202%EF%B8%8F%E2%83%A3%20NextAuth%20%E9%AA%8C%E8%AF%81%E7%94%A8%E6%88%B7%0A%20%20%20%20API-%3E%3EDB%3A%20SELECT%20*%20FROM%20users%20WHERE%20email%3D%3F%0A%20%20%20%20DB--%3E%3EAPI%3A%20%E8%BF%94%E5%9B%9E%20user%20%2B%20passwordHash%0A%20%20%20%20API-%3E%3EAPI%3A%20bcrypt.compare(password%2C%20passwordHash)%0A%20%20%20%20API--%3E%3EFE%3A%20%E7%99%BB%E5%BD%95%E6%88%90%E5%8A%9F%20%7B%20user%20%7D%0A%0A%20%20%20%20Note%20over%20API%2CS%3A%203%EF%B8%8F%E2%83%A3%20%E7%94%9F%E6%88%90%20Session%20%26%20Cookie%0A%20%20%20%20API-%3E%3ES%3A%20%E5%86%99%E5%85%A5%E5%8A%A0%E5%AF%86%E7%9A%84%20next-auth.session-token%0A%20%20%20%20S--%3E%3EU%3A%20%E8%AE%BE%E7%BD%AE%E6%B5%8F%E8%A7%88%E5%99%A8%20Cookie%0A%0A%20%20%20%20Note%20over%20U%2CAPI%3A%204%EF%B8%8F%E2%83%A3%20%E7%94%A8%E6%88%B7%E8%AE%BF%E9%97%AE%E5%8F%97%E4%BF%9D%E6%8A%A4%E6%8E%A5%E5%8F%A3%0A%20%20%20%20U-%3E%3EAPI%3A%20GET%20%2Fapi%2Fprotected%3Cbr%2F%3E%E9%99%84%E5%B8%A6%20Cookie%0A%20%20%20%20API-%3E%3ES%3A%20%E9%AA%8C%E8%AF%81%20Cookie%20%E6%9C%89%E6%95%88%E6%80%A7%0A%20%20%20%20S--%3E%3EAPI%3A%20Session%20%7B%20user%20%7D%0A%20%20%20%20API--%3E%3EU%3A%20%E8%BF%94%E5%9B%9E%E5%8F%97%E4%BF%9D%E6%8A%A4%E6%95%B0%E6%8D%AE%0A%0A%20%20%20%20Note%20over%20U%2CFE%3A%205%EF%B8%8F%E2%83%A3%20%E5%89%8D%E7%AB%AF%E9%80%9A%E8%BF%87%20getServerSession%20%E6%88%96%20useSession%3Cbr%2F%3E%E9%9A%8F%E6%97%B6%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E7%94%A8%E6%88%B7%0A%0A"})]),fallback:t(()=>[...s[0]||(s[0]=[h(" Loading... ",-1)])]),_:1})),s[3]||(s[3]=p("",2))])}const S=r(b,[["render",A]]);export{v as __pageData,S as default};
