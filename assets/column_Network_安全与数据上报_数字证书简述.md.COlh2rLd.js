import{_ as n,C as o,c as r,o as s,j as e,G as g,aQ as a,a as d}from"./chunks/framework.DEi4YP2n.js";const p=JSON.parse('{"title":"数字证书入门：从加密算法到文件格式","description":"","frontmatter":{},"headers":[],"relativePath":"column/Network/安全与数据上报/数字证书简述.md","filePath":"column/Network/安全与数据上报/数字证书简述.md","lastUpdated":1764148425000}'),i={name:"column/Network/安全与数据上报/数字证书简述.md"};function f(c,t,x,S,h,y){const l=o("ArticleMetadata");return s(),r("div",null,[t[0]||(t[0]=e("h1",{id:"数字证书入门-从加密算法到文件格式",tabindex:"-1"},[d("数字证书入门：从加密算法到文件格式 "),e("a",{class:"header-anchor",href:"#数字证书入门-从加密算法到文件格式","aria-label":'Permalink to "数字证书入门：从加密算法到文件格式"'},"​")],-1)),g(l),t[1]||(t[1]=a('<nav class="table-of-contents"><ul><li><a href="#一、加密的基石-对称-vs-非对称加密">一、加密的基石：对称 vs. 非对称加密</a></li><li><a href="#二、国密算法与-sm2-为什么它是银行的-标配">二、国密算法与 SM2：为什么它是银行的“标配”？</a></li><li><a href="#三、数字证书-网络世界的-身份证">三、数字证书：网络世界的“身份证”</a></li><li><a href="#四、常见的证书文件格式">四、常见的证书文件格式</a></li><li><a href="#五、实战指南-什么情况下使用什么样的证书">五、实战指南：什么情况下使用什么样的证书？</a></li><li><a href="#总结">总结</a></li></ul></nav><p>在网络世界里，我们每天都在和“证书”打交道。当你在浏览器地址栏看到那个小锁图标，或者用手机银行 App 进行转账时，背后都有数字证书在默默守护你的信息安全。特别是在中国，银行、政府及关键基础设施领域，<strong>国密算法</strong> 已经成为安全基石。但证书到底是什么？国密 SM2 又有什么特别？那些<code>.pem</code>, <code>.cer</code>, <code>.pfx</code>文件又有什么区别？</p><h3 id="一、加密的基石-对称-vs-非对称加密" tabindex="-1">一、加密的基石：对称 vs. 非对称加密 <a class="header-anchor" href="#一、加密的基石-对称-vs-非对称加密" aria-label="Permalink to &quot;一、加密的基石：对称 vs. 非对称加密&quot;">​</a></h3><p>要理解证书，必须先了解两种基础的加密方式。</p><h4 id="_1-对称加密" tabindex="-1">1. 对称加密 <a class="header-anchor" href="#_1-对称加密" aria-label="Permalink to &quot;1. 对称加密&quot;">​</a></h4><p>想象一下，你和朋友有一个共同的密码箱，你们都用同一把钥匙来锁上和打开这个箱子。</p><ul><li><strong>原理</strong>：加密和解密使用<strong>同一把密钥</strong>。</li><li><strong>国际常见算法</strong>：AES, DES。</li><li><strong>国密算法</strong>：<strong>SM1</strong>和<strong>SM4</strong>。 <ul><li><strong>SM1</strong>：算法不公开，通过芯片硬件实现，安全性高，用于金融 IC 卡等领域。</li><li><strong>SM4</strong>：算法公开，分组长度和密钥长度均为 128 位，安全高效，已成为无线局域网、TLS 等领域的国家标准，是<strong>软件实现的主要国密对称算法</strong>。</li></ul></li><li><strong>优点</strong>：<strong>速度快</strong>，效率高，适合加密大量数据。</li><li><strong>缺点</strong>：<strong>密钥分发困难</strong>。如何安全地把这把“钥匙”交给对方，本身就是一个难题。</li></ul><h4 id="_2-非对称加密" tabindex="-1">2. 非对称加密 <a class="header-anchor" href="#_2-非对称加密" aria-label="Permalink to &quot;2. 非对称加密&quot;">​</a></h4><p>现在想象一下，你有一个特殊的密码箱，它有两把钥匙：一把是<strong>公钥</strong>，可以给任何人，用来<strong>锁上</strong>箱子；另一把是<strong>私钥</strong>，只有你自己持有，用来<strong>打开</strong>箱子。</p><ul><li><strong>原理</strong>：使用一对密钥——<strong>公钥</strong> 和 <strong>私钥</strong>。 <ul><li><strong>公钥</strong>：公开给所有人，用于<strong>加密</strong>数据或<strong>验证</strong>签名。</li><li><strong>私钥</strong>：自己严格保密，用于<strong>解密</strong>数据或<strong>创建</strong>签名。</li></ul></li><li><strong>国际常见算法</strong>：RSA, ECC。</li><li><strong>国密算法</strong>：<strong>SM2</strong>（基于椭圆曲线密码 ECC）。</li><li><strong>优点</strong>：<strong>安全性高</strong>，解决了密钥分发问题。</li><li><strong>缺点</strong>：<strong>速度慢</strong>，计算复杂，不适合加密大量数据。</li></ul><h3 id="二、国密算法与-sm2-为什么它是银行的-标配" tabindex="-1">二、国密算法与 SM2：为什么它是银行的“标配”？ <a class="header-anchor" href="#二、国密算法与-sm2-为什么它是银行的-标配" aria-label="Permalink to &quot;二、国密算法与 SM2：为什么它是银行的“标配”？&quot;">​</a></h3><p><strong>国密算法</strong> 是指国家密码管理局认定和发布的一系列国产商用密码算法。它们构成了我国自主可控的安全技术体系。其中，<strong>SM2</strong>是非对称加密算法的核心。</p><h4 id="为什么银行和重要领域要推行国密" tabindex="-1">为什么银行和重要领域要推行国密？ <a class="header-anchor" href="#为什么银行和重要领域要推行国密" aria-label="Permalink to &quot;为什么银行和重要领域要推行国密？&quot;">​</a></h4><ol><li><strong>自主可控，保障安全</strong>：使用国际通用算法（如 RSA）存在潜在风险。若算法存在未被发现的后门，或未来被破解（例如量子计算机的威胁），将危及国家金融和安全。国密算法由我国自主研发和评估，实现了技术自主可控。</li><li><strong>性能更优</strong>：<strong>SM2 vs. RSA</strong><ul><li><strong>更高的安全性/密钥长度比</strong>：要达到相同的安全强度，SM2（基于 256 位椭圆曲线）的密钥长度仅为 256 位，而 RSA 需要 2048 位甚至更长。这意味着 SM2 的计算量更小，速度更快，占用的存储空间和网络带宽也更少。</li><li><strong>下表是一个直观的对比</strong>：</li></ul></li></ol><table tabindex="0"><thead><tr><th style="text-align:left;">特性</th><th style="text-align:left;">RSA</th><th style="text-align:left;">SM2 (ECC)</th><th style="text-align:left;">优势</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>安全基础</strong></td><td style="text-align:left;">大数分解难题</td><td style="text-align:left;">椭圆曲线离散对数问题</td><td style="text-align:left;">数学难题不同，SM2 目前抗量子计算攻击能力相对稍强</td></tr><tr><td style="text-align:left;"><strong>同等安全强度</strong></td><td style="text-align:left;">2048 位密钥</td><td style="text-align:left;">256 位密钥</td><td style="text-align:left;"><strong>SM2 密钥短得多</strong></td></tr><tr><td style="text-align:left;"><strong>计算速度</strong></td><td style="text-align:left;">慢（特别是解密/签名）</td><td style="text-align:left;">快</td><td style="text-align:left;"><strong>SM2 效率更高</strong></td></tr><tr><td style="text-align:left;"><strong>资源消耗</strong></td><td style="text-align:left;">高</td><td style="text-align:left;">低</td><td style="text-align:left;"><strong>SM2 更节省带宽和存储</strong></td></tr></tbody></table><ol start="3"><li><strong>完整的算法体系</strong>：国密不是一个孤立的算法，而是一个体系： <ul><li><strong>SM2</strong>：用于非对称加密、数字签名和密钥交换。</li><li><strong>SM3</strong>：<strong>杂凑算法（密码哈希）</strong>，相当于国际上的 MD5 或 SHA-256。用于生成数字指纹，保证数据的完整性。SM3 输出 256 位，抗碰撞性高。</li><li><strong>SM4</strong>：用于对称加密，替代 DES/AES。</li><li><strong>SM9</strong>：基于身份的密码算法，可以简化证书管理。</li></ul></li></ol><p><strong>在银行场景中，一个完整的国密 SSL 连接流程如下：</strong></p><ol><li>客户端与服务器建立连接，协商使用国密套件。</li><li>服务器将其<strong>SM2 证书</strong>发送给客户端。</li><li>客户端验证证书真伪（使用信任的国密根 CA）。</li><li>客户端使用服务器证书中的<strong>SM2 公钥</strong>，加密一个随机生成的<strong>SM4 对称密钥</strong>，发送给服务器。</li><li>服务器用其<strong>SM2 私钥</strong>解密，得到 SM4 密钥。</li><li>后续所有通信数据，都使用<strong>SM4 密钥</strong>进行高速加密解密。</li><li>在整个过程中，<strong>SM3</strong>算法被用于计算证书和数据包的哈希值，确保完整性。</li></ol><p>可以看到，SM2、SM3、SM4 协同工作，构成了一个完整、高效、安全的国密传输方案。</p><h3 id="三、数字证书-网络世界的-身份证" tabindex="-1">三、数字证书：网络世界的“身份证” <a class="header-anchor" href="#三、数字证书-网络世界的-身份证" aria-label="Permalink to &quot;三、数字证书：网络世界的“身份证”&quot;">​</a></h3><p>既然非对称加密这么好，那我怎么知道一个公钥真的属于它声称的那个人（或网站）呢？这时，就需要一个权威的“公证处”来担保——这就是<strong>数字证书</strong>。</p><p><strong>数字证书的核心作用就是：将公钥与持有者的身份信息绑定在一起，并由一个可信的第三方进行签名认证。</strong></p><p>这个可信的第三方就是 <strong>CA</strong>。国密体系下的 CA 被称为 <strong>“国密 CA”</strong>，它们使用 SM2 算法签发证书。</p><h4 id="证书里到底有什么" tabindex="-1">证书里到底有什么？ <a class="header-anchor" href="#证书里到底有什么" aria-label="Permalink to &quot;证书里到底有什么？&quot;">​</a></h4><p>一个标准的数字证书（遵循 X.509 标准）包含以下关键信息：</p><ol><li><strong>证书持有者的信息</strong>：如域名、公司名称等。</li><li><strong>证书持有者的公钥</strong>（可能是 RSA 公钥，也可能是<strong>SM2 公钥</strong>）。</li><li><strong>证书颁发者（CA）的信息</strong>。</li><li><strong>证书的有效期</strong>：起止日期。</li><li><strong>CA 对以上所有信息做的数字签名</strong>（使用 RSA 或<strong>SM2</strong>私钥签名，并用<strong>SM3</strong>或 SHA256 做哈希）。</li></ol><p><strong>国密证书</strong> 特指使用<strong>SM2 公钥</strong>、并由 CA 使用<strong>SM2 私钥</strong>和<strong>SM3 杂凑算法</strong>进行签发的证书。</p><h3 id="四、常见的证书文件格式" tabindex="-1">四、常见的证书文件格式 <a class="header-anchor" href="#四、常见的证书文件格式" aria-label="Permalink to &quot;四、常见的证书文件格式&quot;">​</a></h3><p>证书有不同的文件格式，了解它们有助于你在不同场景下正确使用。</p><table tabindex="0"><thead><tr><th style="text-align:left;">格式扩展名</th><th style="text-align:left;">全称</th><th style="text-align:left;">描述</th><th style="text-align:left;">常见用途</th></tr></thead><tbody><tr><td style="text-align:left;"><strong><code>.cer</code>/<code>.crt</code></strong></td><td style="text-align:left;">Certificate</td><td style="text-align:left;">通常存放<strong>单个 X.509 证书</strong>，可以是二进制(DER)或文本格式(PEM)。</td><td style="text-align:left;">网站 SSL 证书、中间 CA 证书。<strong>国密证书也常用此格式</strong>。</td></tr><tr><td style="text-align:left;"><strong><code>.pem</code></strong></td><td style="text-align:left;">Privacy-Enhanced Mail</td><td style="text-align:left;"><strong>文本格式</strong>的证书/密钥容器。以<code>-----BEGIN ...-----</code>开头。可以包含证书、私钥、CA 链等。</td><td style="text-align:left;">在服务器中非常常见，因其可读性强。<strong>国密 SM2 私钥也可以保存在 PEM 文件中</strong>。</td></tr><tr><td style="text-align:left;"><strong><code>.key</code></strong></td><td style="text-align:left;">Key</td><td style="text-align:left;">通常用于<strong>存放私钥</strong>的文件，可以是 PEM 或 DER 格式。</td><td style="text-align:left;">服务器的私钥文件（RSA 或 SM2），需要严格保密。</td></tr><tr><td style="text-align:left;"><strong><code>.pfx</code>/<code>.p12</code></strong></td><td style="text-align:left;">Personal Information Exchange</td><td style="text-align:left;"><strong>二进制格式</strong>，包含<strong>证书和对应的私钥</strong>，并用密码保护。方便备份和传输。</td><td style="text-align:left;">在 Windows 服务器中常见，用于证书迁移。<strong>国密证书和 SM2 私钥也可打包为此格式</strong>。</td></tr><tr><td style="text-align:left;"><strong><code>.jks</code></strong></td><td style="text-align:left;">Java KeyStore</td><td style="text-align:left;"><strong>Java 特有的密钥库格式</strong>，可以存储多个证书和私钥，受密码保护。</td><td style="text-align:left;">Tomcat 等 Java 应用服务器。</td></tr><tr><td style="text-align:left;"><strong><code>.der</code></strong></td><td style="text-align:left;">Distinguished Encoding Rules</td><td style="text-align:left;"><strong>二进制格式</strong>的证书。</td><td style="text-align:left;"></td></tr></tbody></table><h3 id="五、实战指南-什么情况下使用什么样的证书" tabindex="-1">五、实战指南：什么情况下使用什么样的证书？ <a class="header-anchor" href="#五、实战指南-什么情况下使用什么样的证书" aria-label="Permalink to &quot;五、实战指南：什么情况下使用什么样的证书？&quot;">​</a></h3><p>现在我们来点实际的，帮你做决策。</p><table tabindex="0"><thead><tr><th style="text-align:left;">场景</th><th style="text-align:left;">推荐使用的证书/格式</th><th style="text-align:left;">原因与说明</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>部署一个普通的 HTTPS 网站</strong></td><td style="text-align:left;"><strong>国际算法证书</strong>（RSA），文件格式使用：<code>.crt</code>/<code>.pem</code> + <code>.key</code></td><td style="text-align:left;">兼容性最好，所有浏览器和设备都支持。</td></tr><tr><td style="text-align:left;"><strong>部署中国的网上银行、政府网站、或涉及国家安全的系统</strong></td><td style="text-align:left;"><strong>国密证书</strong>（SM2），文件格式使用：<code>.crt</code>/<code>.pem</code> + <code>.key</code></td><td style="text-align:left;"><strong>满足国家法律法规和行业规定</strong>，实现自主可控，且性能更优。需要浏览器或客户端支持国密算法（如安装国密浏览器扩展）。</td></tr><tr><td style="text-align:left;"><strong>代码签名</strong></td><td style="text-align:left;"><strong>代码签名证书</strong>（国际或国密）</td><td style="text-align:left;">国密代码签名证书用于对国内重要软件进行签名。</td></tr><tr><td style="text-align:left;"><strong>电子邮件加密/签名</strong></td><td style="text-align:left;"><strong>S/MIME 证书</strong>（国际或国密）</td><td style="text-align:left;">国密 S/MIME 证书用于政府、企业内部的安全邮件通信。</td></tr><tr><td style="text-align:left;"><strong>客户端身份验证</strong></td><td style="text-align:left;"><strong>客户端证书</strong>，格式通常为 <code>.p12</code></td><td style="text-align:left;">用于双向 TLS/SSL 认证。<strong>国密双向认证中也使用包含 SM2 密钥的.p12 文件</strong>。</td></tr><tr><td style="text-align:left;"><strong>在 Java Tomcat 中部署国密 HTTPS</strong></td><td style="text-align:left;">将<strong>国密证书</strong>和<strong>SM2 私钥</strong>导入到 <strong><code>.jks</code></strong> 文件</td><td style="text-align:left;">需要配置 Tomcat 使用国密相关的 JSSE 提供器和密码套件。</td></tr><tr><td style="text-align:left;"><strong>国密证书备份或从 Windows 迁移</strong></td><td style="text-align:left;">导出为 <strong><code>.pfx</code></strong> 文件</td><td style="text-align:left;">包含 SM2 证书和私钥，带密码保护，方便备份迁移。</td></tr></tbody></table><h3 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to &quot;总结&quot;">​</a></h3><ul><li><strong>对称加密</strong>快，用于加密<strong>数据</strong>（国密：<strong>SM4</strong>）；<strong>非对称加密</strong>安全，用于交换<strong>密钥</strong>和<strong>身份验证</strong>（国密：<strong>SM2</strong>）。</li><li><strong>SM2</strong>相比 RSA 具有<strong>更高效率、更短密钥、更优性能</strong>，是我国商用密码的核心。</li><li><strong>国密算法是一个体系</strong>：<strong>SM2(非对称)、SM3(哈希)、SM4(对称)</strong> 协同工作。</li><li><strong>数字证书</strong>是公钥的“身份证”，<strong>国密证书</strong>特指使用 SM2/SM3 的证书。</li><li>选择证书时，若面向<strong>通用互联网</strong>，可选 RSA 证书；若面向<strong>国内金融、政务等合规领域</strong>，<strong>必须选择国密证书</strong>。</li></ul>',35))])}const u=n(i,[["render",f]]);export{p as __pageData,u as default};
