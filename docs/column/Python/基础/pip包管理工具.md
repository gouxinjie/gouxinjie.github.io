# `pip` å’Œ `requirements.txt` è¯¦è§£

[[toc]]

![](https://images.unsplash.com/photo-1555949963-ff9fe0c870eb?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80){width=80%}

åœ¨ `Python` é¡¹ç›®å¼€å‘ä¸­,æˆ‘ä»¬ç»å¸¸ä¼šç”¨åˆ°ç¬¬ä¸‰æ–¹åº“ï¼Œæ¯”å¦‚ `requests`ã€`flask`ã€`numPy` ç­‰ã€‚å¦‚æœä¸åŠ ç®¡ç†ï¼Œé¡¹ç›®å¯èƒ½ä¼šå‡ºç°â€œæˆ‘çš„ç¯å¢ƒèƒ½è·‘ï¼Œä½ çš„ç¯å¢ƒæŠ¥é”™â€çš„é—®é¢˜ã€‚

è¿™æ—¶å°±éœ€è¦äº†è§£ä¸¤ä¸ªæ ¸å¿ƒå·¥å…·ï¼š**`pip`** å’Œ **`requirements.txt`**ã€‚

## ä¸€ã€ä»€ä¹ˆæ˜¯ `pip`

`pip` æ˜¯ `Python` çš„å®˜æ–¹åŒ…ç®¡ç†å·¥å…·ï¼ˆPackage Installer for Pythonï¼‰ã€‚å®ƒå¯ä»¥ç”¨æ¥ **å®‰è£…ã€å¸è½½å’Œç®¡ç† Python åŒ…**ã€‚

[`pip`å®‰è£…ä¾èµ–å­˜æ”¾ä½ç½®](#äº”ã€pip-ä¾èµ–å­˜æ”¾ä½ç½®)

### å¸¸ç”¨å‘½ä»¤

1. **å®‰è£…åŒ…**

   ```bash
   pip install requests
   ```

   å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„ `requests`ã€‚

   å¦‚æœéœ€è¦æŒ‡å®šç‰ˆæœ¬ï¼š

   ```bash
   pip install requests==2.31.0
   ```

2. **å¸è½½åŒ…**

   ```bash
   pip uninstall requests
   ```

3. **æŸ¥çœ‹å·²å®‰è£…åŒ…**

   ```bash
   pip list
   ```

4. **æŸ¥çœ‹æŸä¸ªåŒ…çš„è¯¦ç»†ä¿¡æ¯**

   ```bash
   pip show requests
   ```

   ä¼šæ˜¾ç¤ºç‰ˆæœ¬ã€å®‰è£…è·¯å¾„ã€ä¾èµ–ç­‰ã€‚

5. **æ›´æ–°åŒ…**

   ```bash
   pip install --upgrade requests
   ```

6. **å†»ç»“ï¼ˆå¯¼å‡ºï¼‰å½“å‰ç¯å¢ƒä¾èµ–**

   ```bash
   pip freeze
   ```

   è¾“å‡ºç±»ä¼¼ï¼š

   ```
   Flask==2.2.5
   requests==2.31.0
   SQLAlchemy==2.0.23
   ```

## äºŒã€ä»€ä¹ˆæ˜¯ `requirements.txt`

`requirements.txt` æ˜¯ä¸€ä¸ªçº¯æ–‡æœ¬æ–‡ä»¶ï¼Œç”¨æ¥è®°å½•é¡¹ç›®æ‰€éœ€çš„ä¾èµ–åº“åŠå…¶ç‰ˆæœ¬ã€‚å®ƒé€šå¸¸å’Œ `pip` é…åˆä½¿ç”¨ï¼Œä½œç”¨ç±»ä¼¼äº **â€œé¡¹ç›®ä¾èµ–æ¸…å•â€**ã€‚

### 1. åˆ›å»º `requirements.txt`

æœ€å¸¸è§çš„æ–¹æ³•æ˜¯ç”¨ï¼š

```bash
pip freeze > requirements.txt
```

ç”Ÿæˆçš„æ–‡ä»¶å†…å®¹å¯èƒ½æ˜¯ï¼š

```
Flask==2.2.5
requests==2.31.0
SQLAlchemy==2.0.23
```

è¿™æ ·åˆ«äººæ‹¿åˆ°é¡¹ç›®åï¼Œå¯ä»¥å¿«é€Ÿåœ¨æ–°ç¯å¢ƒé‡Œå®‰è£…æ‰€æœ‰ä¾èµ–ã€‚

### 2. ä½¿ç”¨ `requirements.txt`

å®‰è£…ä¾èµ–ï¼š

```bash
pip install -r requirements.txt
```

è¿™æ ·ä¼šä¸€é”®å®‰è£…æ–‡ä»¶é‡Œåˆ—å‡ºçš„æ‰€æœ‰åŒ…åŠå¯¹åº”ç‰ˆæœ¬ã€‚

### 3. ç‰ˆæœ¬æ§åˆ¶å†™æ³•

åœ¨ `requirements.txt` é‡Œï¼Œä½ å¯ä»¥æŒ‡å®šåŒ…çš„ç‰ˆæœ¬èŒƒå›´ï¼š

- **å›ºå®šç‰ˆæœ¬**

  ```
  requests==2.31.0
  ```

  å¿…é¡»å®‰è£… 2.31.0ã€‚

- **å¤§äºç­‰äºæŸä¸ªç‰ˆæœ¬**

  ```
  Flask>=2.0
  ```

- **å°äºæŸä¸ªç‰ˆæœ¬**

  ```
  Django<4.0
  ```

- **èŒƒå›´**

  ```
  SQLAlchemy>=1.4,<2.0
  ```

è¿™æ ·èƒ½é¿å…å…¼å®¹æ€§é—®é¢˜ã€‚

## ä¸‰ã€ä¸ºä»€ä¹ˆè¦ç”¨ `requirements.txt`

1. **ä¿è¯ç¯å¢ƒä¸€è‡´** å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒéƒ½ä½¿ç”¨åŒæ ·çš„ä¾èµ–ç‰ˆæœ¬ï¼Œé¿å…â€œæœ¬åœ°èƒ½è·‘ï¼Œçº¿ä¸ŠæŠ¥é”™â€çš„æƒ…å†µã€‚

2. **æ–¹ä¾¿åä½œ** å›¢é˜Ÿæˆå‘˜åªéœ€è¦ `pip install -r requirements.txt` å°±èƒ½å¿«é€Ÿæ­å»ºç¯å¢ƒã€‚

3. **ä¾¿äºéƒ¨ç½²** éƒ¨ç½²åˆ°æœåŠ¡å™¨æˆ–å®¹å™¨æ—¶ï¼Œä¹Ÿå¯ä»¥ä¸€é”®å®‰è£…ä¾èµ–ã€‚

## å››ã€å¸¸è§å®è·µ

1. **è™šæ‹Ÿç¯å¢ƒé…åˆ `requirements.txt`** é€šå¸¸æˆ‘ä»¬ä¼šå…ˆåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒï¼Œå†åœ¨å…¶ä¸­å®‰è£…ä¾èµ–å¹¶ç”Ÿæˆ `requirements.txt`ã€‚

   ```bash
   python -m venv venv
   source venv/bin/activate   # Linux/Mac
   venv\Scripts\activate      # Windows
   pip install -r requirements.txt
   ```

   è¿™æ ·ä¸åŒé¡¹ç›®ä¹‹é—´ä¸ä¼šå†²çªã€‚

2. **åˆ†å±‚ä¾èµ–** æœ‰äº›é¡¹ç›®ä¼šç»´æŠ¤å¤šä¸ªä¾èµ–æ–‡ä»¶ï¼Œæ¯”å¦‚ï¼š

   - `requirements.txt`ï¼ˆåŸºç¡€ä¾èµ–ï¼‰
   - `requirements-dev.txt`ï¼ˆå¼€å‘è°ƒè¯•ç”¨ï¼Œæ¯”å¦‚ pytest, blackï¼‰
   - `requirements-prod.txt`ï¼ˆç”Ÿäº§ç¯å¢ƒä¾èµ–ï¼‰

## äº”ã€pip ä¾èµ–å­˜æ”¾ä½ç½®

::: tip `pip`å’Œå®‰è£…çš„ä¾èµ–éƒ½å­˜æ”¾åˆ°äº†å“ªé‡Œï¼Œæœ¬åœ°é¡¹ç›®æ–‡ä»¶å¤¹å¹¶æ²¡æœ‰ï¼Ÿ

è¿™æ˜¯ä¸ªå¾ˆå¸¸è§çš„ç–‘é—® ğŸ‘ã€‚  
ä½ ç”¨ pip install xxx å®‰è£…ä¾èµ–åï¼Œé»˜è®¤æƒ…å†µä¸‹ ä¸ä¼šå®‰è£…åˆ°ä½ çš„é¡¹ç›®æ–‡ä»¶å¤¹ï¼Œè€Œæ˜¯å®‰è£…åˆ° Python çš„ site-packages ç›®å½• ä¸‹ã€‚å…·ä½“æƒ…å†µå–å†³äºä½ æ˜¯ç”¨ ç³»ç»Ÿ Python è¿˜æ˜¯ è™šæ‹Ÿç¯å¢ƒã€‚

:::

### 1. å…¨å±€å®‰è£…ï¼ˆæ²¡æœ‰è™šæ‹Ÿç¯å¢ƒæ—¶ï¼‰

å¦‚æœä½ ç›´æ¥æ‰§è¡Œï¼š

```bash
pip install requests
```

é‚£ä¹ˆåŒ…ä¼šè¢«å®‰è£…åˆ° **å…¨å±€ Python è§£é‡Šå™¨çš„ site-packages** ç›®å½•ã€‚

ä½ å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æ‰¾åˆ°ä½ç½®ï¼š

```bash
python -m site
```

è¾“å‡ºé‡Œä¼šæœ‰ç±»ä¼¼ï¼š

```
sys.path = [
    '...',
    '/usr/local/lib/python3.11/site-packages',
]
```

æœ€åè¿™ä¸€é¡¹å°±æ˜¯ `pip` å®‰è£…ä¾èµ–çš„è·¯å¾„ã€‚

**å¦‚å›¾ï¼š**

![pip-1.png](../images/pip-1.png)

æˆ–è€…æ›´ç›´æ¥ï¼š

```bash
pip show requests
```

**å¦‚å›¾ï¼š**

![pip-2.png](../images/pip-1.png)

è¾“å‡ºé‡Œä¼šæœ‰ï¼š

```
Location: /usr/local/lib/python3.11/site-packages
```

**æ–‡ä»¶èµ„æºç®¡ç†ä½ç½®ï¼š**

![pip-3.png](../images/pip-3.png)

### 2. è™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰

é€šå¸¸å¼€å‘æ—¶æˆ‘ä»¬ä¸ä¼šå…¨å±€å®‰è£…ï¼Œè€Œæ˜¯ç”¨ **è™šæ‹Ÿç¯å¢ƒ** éš”ç¦»ä¾èµ–ã€‚

ä¾‹å¦‚ï¼š

```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
venv\Scripts\activate     # Windows ä¸‹æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ ä¸è¦å¿˜è®°äº†
pip install requests
```

æ­¤æ—¶ä¾èµ–ä¼šè£…åˆ°ï¼š

```
<é¡¹ç›®ç›®å½•>/venv/lib/python3.11/site-packages
```

ï¼ˆWindows ä¸‹æ˜¯ `venv\Lib\site-packages`ï¼‰

**å¦‚å›¾ï¼š**

![pip-4.png](../images/pip-4.png)

è¿™æ ·ä¾èµ–å°±ä¼šè·Ÿéšé¡¹ç›®ï¼Œè€Œä¸æ˜¯å…¨å±€å…±äº«ã€‚

### 3. ä¸ºä»€ä¹ˆé¡¹ç›®æ–‡ä»¶å¤¹é‡Œçœ‹ä¸åˆ°

å› ä¸º `pip` å®‰è£…ä¸ä¼šæŠŠåŒ…æ•£è½åˆ°ä½ çš„æºç ç›®å½•ï¼Œè€Œæ˜¯é›†ä¸­æ”¾åœ¨ **site-packages**ï¼ŒPython è¿è¡Œæ—¶é€šè¿‡ `sys.path` å»æ‰¾åˆ°è¿™äº›åŒ…ã€‚å¦‚æœä½ éœ€è¦â€œè®°å½•â€ä¾èµ–ï¼Œå¯ä»¥ç”¨ï¼š

```bash
pip freeze > requirements.txt
```

ä¸‹æ¬¡åœ¨æ–°çš„ç¯å¢ƒé‡Œå¯ä»¥ï¼š

```bash
pip install -r requirements.txt
```
