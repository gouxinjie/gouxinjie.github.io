# MySQL 增删改查
以下是 `MySQL` 中最常用的查询语句，涵盖基础查询、条件筛选、排序分组、连接查询等高频操作：

---

### **1. 基础查询**

```sql
-- 查询表中所有数据
SELECT * FROM 表名;

-- 查询特定列
SELECT 列1, 列2 FROM 表名;

-- 去重查询
SELECT DISTINCT 列名 FROM 表名;

-- 限制返回行数
SELECT * FROM 表名 LIMIT 10;       -- 前10条
SELECT * FROM 表名 LIMIT 5, 10;    -- 从第6行开始返回10条
```

---

### **2. 条件查询（WHERE）**

```sql
-- 基本条件
SELECT * FROM 表名 WHERE 列 = 值;

-- 多条件组合
SELECT * FROM 表名
WHERE 条件1 AND 条件2
   OR 条件3;

-- 模糊查询
SELECT * FROM 表名 WHERE 列 LIKE '%关键词%';  -- %表示任意字符
SELECT * FROM 表名 WHERE 列 LIKE '张_';      -- _表示单个字符

-- 范围查询
SELECT * FROM 表名 WHERE 列 BETWEEN 值1 AND 值2;
SELECT * FROM 表名 WHERE 列 IN (值1, 值2, 值3);

-- NULL值判断
SELECT * FROM 表名 WHERE 列 IS NULL;
SELECT * FROM 表名 WHERE 列 IS NOT NULL;
```

---

### **3. 排序与分组**

```sql
-- 排序
SELECT * FROM 表名 ORDER BY 列1 ASC;   -- 升序(默认)
SELECT * FROM 表名 ORDER BY 列1 DESC;  -- 降序

-- 多列排序
SELECT * FROM 表名 ORDER BY 列1 DESC, 列2 ASC;

-- 分组统计
SELECT 分组列, COUNT(*), AVG(数值列)
FROM 表名
GROUP BY 分组列;

-- 分组后筛选(HAVING)
SELECT 分组列, COUNT(*)
FROM 表名
GROUP BY 分组列
HAVING COUNT(*) > 5;
```

---

### **4. 连接查询**

```sql
-- 内连接(交集)
SELECT * FROM 表A
INNER JOIN 表B ON 表A.列 = 表B.列;

-- 左连接(左表全部+右表匹配)
SELECT * FROM 表A
LEFT JOIN 表B ON 表A.列 = 表B.列;

-- 右连接(右表全部+左表匹配)
SELECT * FROM 表A
RIGHT JOIN 表B ON 表A.列 = 表B.列;

-- 全连接(MySQL通过UNION实现)
SELECT * FROM 表A LEFT JOIN 表B ON 表A.列 = 表B.列
UNION
SELECT * FROM 表A RIGHT JOIN 表B ON 表A.列 = 表B.列;
```

---

### **5. 子查询**

```sql
-- WHERE子句中的子查询
SELECT * FROM 表A
WHERE 列 IN (SELECT 列 FROM 表B WHERE 条件);

-- FROM子句中的子查询
SELECT * FROM (SELECT 列1, 列2 FROM 表名) AS 临时表;

-- SELECT子句中的子查询
SELECT 列1, (SELECT MAX(列2) FROM 表B) AS 最大值
FROM 表A;
```

---

### **6. 聚合函数**

```sql
SELECT
  COUNT(*) AS 总数,          -- 计数
  SUM(数值列) AS 总和,       -- 求和
  AVG(数值列) AS 平均值,     -- 平均值
  MAX(数值列) AS 最大值,     -- 最大值
  MIN(数值列) AS 最小值,     -- 最小值
  GROUP_CONCAT(列) AS 合并值 -- 合并字符串
FROM 表名;
```

---

### **7. 数据操作**

```sql
-- 插入数据
INSERT INTO 表名 (列1, 列2) VALUES (值1, 值2);

-- 批量插入
INSERT INTO 表名 (列1, 列2)
VALUES (值1, 值2), (值3, 值4), (值5, 值6);

-- 更新数据
UPDATE 表名 SET 列1=新值 WHERE 条件;

-- 删除数据
DELETE FROM 表名 WHERE 条件;

-- 清空表(不可回滚)
TRUNCATE TABLE 表名;
```

---

### **8. 实用技巧**

```sql
-- 快速复制表结构
CREATE TABLE 新表名 LIKE 原表名;

-- 复制表数据
INSERT INTO 新表名 SELECT * FROM 原表名;

-- 条件判断(CASE WHEN)
SELECT
  列1,
  CASE
    WHEN 条件1 THEN 结果1
    WHEN 条件2 THEN 结果2
    ELSE 默认结果
  END AS 别名
FROM 表名;

-- 日期处理
SELECT * FROM 表名
WHERE DATE(时间列) = '2023-01-01';

SELECT NOW();  -- 获取当前时间
```

---
